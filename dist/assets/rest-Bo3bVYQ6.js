var D=Object.defineProperty;var d=(o,u)=>D(o,"name",{value:u,configurable:!0});import{r as L,h as _}from"./index-DX8JTgJZ.js";var v={},A,p;function M(){if(p)return A;p=1;var o="%[a-f0-9]{2}",u=new RegExp("("+o+")|([^%]+?)","gi"),h=new RegExp("("+o+")+","gi");function l(c,s){try{return[decodeURIComponent(c.join(""))]}catch{}if(c.length===1)return c;s=s||1;var F=c.slice(0,s),S=c.slice(s);return Array.prototype.concat.call([],l(F),l(S))}d(l,"decodeComponents");function i(c){try{return decodeURIComponent(c)}catch{for(var s=c.match(u)||[],F=1;F<s.length;F++)c=l(s,F).join(""),s=c.match(u)||[];return c}}d(i,"decode");function g(c){for(var s={"%FE%FF":"��","%FF%FE":"��"},F=h.exec(c);F;){try{s[F[0]]=decodeURIComponent(F[0])}catch{var S=i(F[0]);S!==F[0]&&(s[F[0]]=S)}F=h.exec(c)}s["%C2"]="�";for(var y=Object.keys(s),O=0;O<y.length;O++){var b=y[O];c=c.replace(new RegExp(b,"g"),s[b])}return c}return d(g,"customDecodeURIComponent"),A=d(function(c){if(typeof c!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof c+"`");try{return c=c.replace(/\+/g," "),decodeURIComponent(c)}catch{return g(c)}},"decodeUriComponent"),A}d(M,"requireDecodeUriComponent");var x,P;function V(){return P||(P=1,x=d((o,u)=>{if(!(typeof o=="string"&&typeof u=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(u==="")return[o];const h=o.indexOf(u);return h===-1?[o]:[o.slice(0,h),o.slice(h+u.length)]},"splitOnFirst")),x}d(V,"requireSplitOnFirst");var T,U;function B(){return U||(U=1,T=d(function(o,u){for(var h={},l=Object.keys(o),i=Array.isArray(u),g=0;g<l.length;g++){var c=l[g],s=o[c];(i?u.indexOf(c)!==-1:u(c,s,o))&&(h[c]=s)}return h},"filterObj")),T}d(B,"requireFilterObj");var $;function Q(){return $||($=1,function(o){const u=L(),h=M(),l=V(),i=B(),g=d(r=>r==null,"isNullOrUndefined"),c=Symbol("encodeFragmentIdentifier");function s(r){switch(r.arrayFormat){case"index":return e=>(t,n)=>{const a=t.length;return n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[y(e,r),"[",a,"]"].join("")]:[...t,[y(e,r),"[",y(a,r),"]=",y(n,r)].join("")]};case"bracket":return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[y(e,r),"[]"].join("")]:[...t,[y(e,r),"[]=",y(n,r)].join("")];case"colon-list-separator":return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,[y(e,r),":list="].join("")]:[...t,[y(e,r),":list=",y(n,r)].join("")];case"comma":case"separator":case"bracket-separator":{const e=r.arrayFormat==="bracket-separator"?"[]=":"=";return t=>(n,a)=>a===void 0||r.skipNull&&a===null||r.skipEmptyString&&a===""?n:(a=a===null?"":a,n.length===0?[[y(t,r),e,y(a,r)].join("")]:[[n,y(a,r)].join(r.arrayFormatSeparator)])}default:return e=>(t,n)=>n===void 0||r.skipNull&&n===null||r.skipEmptyString&&n===""?t:n===null?[...t,y(e,r)]:[...t,[y(e,r),"=",y(n,r)].join("")]}}d(s,"encoderForArrayFormat");function F(r){let e;switch(r.arrayFormat){case"index":return(t,n,a)=>{if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e){a[t]=n;return}a[t]===void 0&&(a[t]={}),a[t][e[1]]=n};case"bracket":return(t,n,a)=>{if(e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),!e){a[t]=n;return}if(a[t]===void 0){a[t]=[n];return}a[t]=[].concat(a[t],n)};case"colon-list-separator":return(t,n,a)=>{if(e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),!e){a[t]=n;return}if(a[t]===void 0){a[t]=[n];return}a[t]=[].concat(a[t],n)};case"comma":case"separator":return(t,n,a)=>{const m=typeof n=="string"&&n.includes(r.arrayFormatSeparator),f=typeof n=="string"&&!m&&O(n,r).includes(r.arrayFormatSeparator);n=f?O(n,r):n;const j=m||f?n.split(r.arrayFormatSeparator).map(J=>O(J,r)):n===null?n:O(n,r);a[t]=j};case"bracket-separator":return(t,n,a)=>{const m=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!m){a[t]=n&&O(n,r);return}const f=n===null?[]:n.split(r.arrayFormatSeparator).map(j=>O(j,r));if(a[t]===void 0){a[t]=f;return}a[t]=[].concat(a[t],f)};default:return(t,n,a)=>{if(a[t]===void 0){a[t]=n;return}a[t]=[].concat(a[t],n)}}}d(F,"parserForArrayFormat");function S(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}d(S,"validateArrayFormatSeparator");function y(r,e){return e.encode?e.strict?u(r):encodeURIComponent(r):r}d(y,"encode");function O(r,e){return e.decode?h(r):r}d(O,"decode");function b(r){return Array.isArray(r)?r.sort():typeof r=="object"?b(Object.keys(r)).sort((e,t)=>Number(e)-Number(t)).map(e=>r[e]):r}d(b,"keysSorter");function w(r){const e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}d(w,"removeHash");function C(r){let e="";const t=r.indexOf("#");return t!==-1&&(e=r.slice(t)),e}d(C,"getHash");function N(r){r=w(r);const e=r.indexOf("?");return e===-1?"":r.slice(e+1)}d(N,"extract");function R(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}d(R,"parseValue");function E(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),S(e.arrayFormatSeparator);const t=F(e),n=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return n;for(const a of r.split("&")){if(a==="")continue;let[m,f]=l(e.decode?a.replace(/\+/g," "):a,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?f:O(f,e),t(O(m,e),f,n)}for(const a of Object.keys(n)){const m=n[a];if(typeof m=="object"&&m!==null)for(const f of Object.keys(m))m[f]=R(m[f],e);else n[a]=R(m,e)}return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((a,m)=>{const f=n[m];return f&&typeof f=="object"&&!Array.isArray(f)?a[m]=b(f):a[m]=f,a},Object.create(null))}d(E,"parse"),o.extract=N,o.parse=E,o.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),S(e.arrayFormatSeparator);const t=d(f=>e.skipNull&&g(r[f])||e.skipEmptyString&&r[f]==="","shouldFilter"),n=s(e),a={};for(const f of Object.keys(r))t(f)||(a[f]=r[f]);const m=Object.keys(a);return e.sort!==!1&&m.sort(e.sort),m.map(f=>{const j=r[f];return j===void 0?"":j===null?y(f,e):Array.isArray(j)?j.length===0&&e.arrayFormat==="bracket-separator"?y(f,e)+"[]":j.reduce(n(f),[]).join("&"):y(f,e)+"="+y(j,e)}).filter(f=>f.length>0).join("&")},o.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);const[t,n]=l(r,"#");return Object.assign({url:t.split("?")[0]||"",query:E(N(r),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:O(n,e)}:{})},o.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0,[c]:!0},e);const t=w(r.url).split("?")[0]||"",n=o.extract(r.url),a=o.parse(n,{sort:!1}),m=Object.assign(a,r.query);let f=o.stringify(m,e);f&&(f=`?${f}`);let j=C(r.url);return r.fragmentIdentifier&&(j=`#${e[c]?y(r.fragmentIdentifier,e):r.fragmentIdentifier}`),`${t}${f}${j}`},o.pick=(r,e,t)=>{t=Object.assign({parseFragmentIdentifier:!0,[c]:!1},t);const{url:n,query:a,fragmentIdentifier:m}=o.parseUrl(r,t);return o.stringifyUrl({url:n,query:i(a,e),fragmentIdentifier:m},t)},o.exclude=(r,e,t)=>{const n=Array.isArray(e)?a=>!e.includes(a):(a,m)=>!e(a,m);return o.pick(r,n,t)}}(v)),v}d(Q,"requireQueryString");var q=Q(),I=function(){return I=Object.assign||function(o){for(var u,h=1,l=arguments.length;h<l;h++){u=arguments[h];for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&(o[i]=u[i])}return o},I.apply(this,arguments)};const z=d(function(o,u,h){return u===void 0&&(u=_),h===void 0&&(h="Content-Range"),{getList:d(function(l,i){var g=i.pagination||{page:1,perPage:10},c=g.page,s=g.perPage,F=i.sort||{field:"id",order:"ASC"},S=F.field,y=F.order,O=(c-1)*s,b=c*s-1,w={sort:JSON.stringify([S,y]),range:JSON.stringify([O,b]),filter:JSON.stringify(i.filter)},C="".concat(o,"/").concat(l,"?").concat(q.stringify(w)),N=h==="Content-Range"?{headers:new Headers({Range:"".concat(l,"=").concat(O,"-").concat(b)}),signal:i==null?void 0:i.signal}:{signal:i==null?void 0:i.signal};return u(C,N).then(function(R){var E=R.headers,r=R.json;if(!E.has(h))throw new Error("The ".concat(h," header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare ").concat(h," in the Access-Control-Expose-Headers header?"));return{data:r,total:h==="Content-Range"?parseInt(E.get("content-range").split("/").pop()||"",10):parseInt(E.get(h.toLowerCase()))}})},"getList"),getOne:d(function(l,i){return u("".concat(o,"/").concat(l,"/").concat(encodeURIComponent(i.id)),{signal:i==null?void 0:i.signal}).then(function(g){var c=g.json;return{data:c}})},"getOne"),getMany:d(function(l,i){var g={filter:JSON.stringify({id:i.ids})},c="".concat(o,"/").concat(l,"?").concat(q.stringify(g));return u(c,{signal:i==null?void 0:i.signal}).then(function(s){var F=s.json;return{data:F}})},"getMany"),getManyReference:d(function(l,i){var g,c=i.pagination,s=c.page,F=c.perPage,S=i.sort,y=S.field,O=S.order,b=(s-1)*F,w=s*F-1,C={sort:JSON.stringify([y,O]),range:JSON.stringify([(s-1)*F,s*F-1]),filter:JSON.stringify(I(I({},i.filter),(g={},g[i.target]=i.id,g)))},N="".concat(o,"/").concat(l,"?").concat(q.stringify(C)),R=h==="Content-Range"?{headers:new Headers({Range:"".concat(l,"=").concat(b,"-").concat(w)}),signal:i==null?void 0:i.signal}:{signal:i==null?void 0:i.signal};return u(N,R).then(function(E){var r=E.headers,e=E.json;if(!r.has(h))throw new Error("The ".concat(h," header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare ").concat(h," in the Access-Control-Expose-Headers header?"));return{data:e,total:h==="Content-Range"?parseInt(r.get("content-range").split("/").pop()||"",10):parseInt(r.get(h.toLowerCase()))}})},"getManyReference"),update:d(function(l,i){return u("".concat(o,"/").concat(l,"/").concat(encodeURIComponent(i.id)),{method:"PUT",body:JSON.stringify(i.data)}).then(function(g){var c=g.json;return{data:c}})},"update"),updateMany:d(function(l,i){return Promise.all(i.ids.map(function(g){return u("".concat(o,"/").concat(l,"/").concat(encodeURIComponent(g)),{method:"PUT",body:JSON.stringify(i.data)})})).then(function(g){return{data:g.map(function(c){var s=c.json;return s.id})}})},"updateMany"),create:d(function(l,i){return u("".concat(o,"/").concat(l),{method:"POST",body:JSON.stringify(i.data)}).then(function(g){var c=g.json;return{data:c}})},"create"),delete:d(function(l,i){return u("".concat(o,"/").concat(l,"/").concat(encodeURIComponent(i.id)),{method:"DELETE",headers:new Headers({"Content-Type":"text/plain"})}).then(function(g){var c=g.json;return{data:c}})},"delete"),deleteMany:d(function(l,i){return Promise.all(i.ids.map(function(g){return u("".concat(o,"/").concat(l,"/").concat(encodeURIComponent(g)),{method:"DELETE",headers:new Headers({"Content-Type":"text/plain"})})})).then(function(g){return{data:g.map(function(c){var s=c.json;return s.id})}})},"deleteMany")}},"simpleRestProvider"),W=z("http://localhost:4000");export{W as default};
//# sourceMappingURL=rest-Bo3bVYQ6.js.map
