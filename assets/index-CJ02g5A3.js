const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./vendor-B8RineCB.js","./lodash-Bo37TYK2.js","./react-BnqDHuo8.js","./mui-vtje_hVu.js","./rest-Cg6_tm34.js","./fr-Bsr58AwD.js"])))=>i.map(i=>d[i]);
var er=Object.defineProperty;var o=(t,s)=>er(t,"name",{value:s,configurable:!0});import{j as e,r as p,L as ts,o as tr,n as ze,l as ss,h as rs,S as sr,U as rr,Q as or,V as nr,A as ir,W as ar}from"./react-BnqDHuo8.js";import{J as lr,L as de,K as U,N as gt,O as W,R as V,S as Ge,T as Y,U as Be,V as cr,W as we,X as Fe,Y as P,Z as me,$ as N,a0 as v,a1 as S,a2 as Ke,a3 as le,a4 as se,a5 as os,a6 as ns,a7 as $,a8 as ve,a9 as Ce,aa as ft,ab as Qe,ac as w,ad as yt,ae as z,af as T,ag as is,ah as as,ai as dr,aj as ue,ak as Je,al as B,am as he,an as ur,ao as xr,ap as hr,e as Wt,aq as mr,ar as pr,as as jr,at as gr,au as fr,av as yr,D as br,aw as Ar,ax as Pe,ay as Ze,az as wr,aA as vr,aB as Cr,aC as Sr,aD as _r,aE as ce,aF as ls,aG as cs,aH as ae,aI as ds,aJ as bt,aK as kr,aL as At,aM as Re,aN as wt,aO as be,aP as us,aQ as xs,aR as Xe,aS as re,aT as vt,aU as mt,aV as hs,aW as Tr,aX as Dr,aY as Er,aZ as Se,a_ as Ne,a$ as Ir,c as Pr,b0 as Lr,b1 as ge,b2 as Br,b3 as ms,b4 as Fr,b5 as ps,b6 as js,b7 as gs,b8 as Ve,b9 as Rr,ba as Mr,bb as Wr,bc as $r,bd as Or,be as et,bf as fs,bg as zr,bh as Ur,bi as $t,bj as Ot,bk as Nr,bl as Vr,bm as Hr,bn as qr,bo as Yr,bp as Gr,bq as Kr,br as Qr,m as Jr,C as Zr,bs as Xr,bt as eo,F as to,bu as so,bv as ro,bw as Z}from"./vendor-B8RineCB.js";import{a as R,a8 as d,a_ as k,aM as D,d as c,V as pt,b2 as oo,b5 as no,bn as Ue,bo as G,bp as K,h as X,bx as ee,i as Q,f as ys,by as Ie,bz as bs,I as Le,b3 as io,bA as ao,bB as y,bC as Ct,bD as As,ax as St,aV as He,U as _t,bE as lo,bF as co,bG as uo,bH as xo,bI as ho,B as pe,s as kt,bJ as mo,bK as qe,bL as Tt,aK as _e,aL as Me,aG as M,aF as b,aI as ke,bM as ws,bN as vs,aC as Cs,aU as po,aO as Ss,aA as zt,aH as Ut,bO as Nt,g as _s,bP as jo,bQ as go,a0 as fo,bR as yo,bS as Dt,j as Et,bT as bo,aq as Ao,bU as wo,c as vo,bV as Co,A as So,bW as _o,N as It,bX as ks,bY as Pt,bZ as ko,af as To,b_ as Do,b$ as Eo,c0 as Io,b7 as Po,b8 as rt,c1 as Lo,c2 as Bo,aE as Fo,c3 as Ro,c4 as Ts,w as Ds,bt as Es,t as Is,c5 as Ps,c6 as Ls,H as Mo,ak as Wo,a5 as $o,c7 as Oo,c8 as zo,n as Lt,aD as Uo,c9 as No,o as Vo,b6 as Ho}from"./mui-vtje_hVu.js";import"./lodash-Bo37TYK2.js";o(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}o(r,"getFetchOpts");function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}o(n,"processPreload")},"polyfill")();const qo="modulepreload",Yo=o(function(t,s){return new URL(t,s).href},"assetsURL"),Vt={},Te=o(function(s,r,n){let i=Promise.resolve();if(r&&r.length>0){let l=o(function(g){return Promise.all(g.map(A=>Promise.resolve(A).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))},"allSettled2");const u=document.getElementsByTagName("link"),x=document.querySelector("meta[property=csp-nonce]"),h=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));i=l(r.map(g=>{if(g=Yo(g,n),g in Vt)return;Vt[g]=!0;const A=g.endsWith(".css"),j=A?'[rel="stylesheet"]':"";if(!!n)for(let _=u.length-1;_>=0;_--){const F=u[_];if(F.href===g&&(!A||F.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${j}`))return;const m=document.createElement("link");if(m.rel=A?"stylesheet":qo,A||(m.as="script"),m.crossOrigin="",m.href=g,h&&m.setAttribute("nonce",h),document.head.appendChild(m),A)return new Promise((_,F)=>{m.addEventListener("load",_),m.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return o(a,"handlePreloadError"),i.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return s().catch(a)})},"preload"),f=new lr("https://sensornode.shop");f.autoCancellation(!1);const ie=o(async(t,s)=>await f.collection(t).getOne(s),"fetchPocketbaseDocument");async function Go(t){return(await f.collection(t).getFullList()).map(r=>r)}o(Go,"fetchAllPocketbaseDocuments");async function Bs(t,s){return(await f.collection(t).create(s)).id}o(Bs,"createPocketbaseDocument");async function jt(t,s,r){await f.collection(t).update(s,r)}o(jt,"updatePocketbaseDocument");async function Ye(t,s){await f.collection(t).delete(s)}o(Ye,"deletePocketbaseDocument");const Ko={login:o(async({email:t,password:s})=>{try{const r=await f.collection("users").authWithPassword(t,s);localStorage.setItem("username",t);const n=r.token;return n&&f.authStore.save(n),Promise.resolve()}catch{return Promise.reject()}},"login"),logout:o(()=>(localStorage.removeItem("username"),Promise.resolve()),"logout"),checkError:o(()=>Promise.resolve(),"checkError"),checkAuth:o(()=>localStorage.getItem("username")?Promise.resolve():Promise.reject(),"checkAuth"),getPermissions:o(()=>Promise.resolve(),"getPermissions"),getIdentity:o(()=>Promise.resolve({id:"user",fullName:"Jane Doe",avatar:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4gKgSUNDX1BST0ZJTEUAAQEAAAKQbGNtcwQwAABtbnRyUkdCIFhZWiAH3wAIABMAEgAWADFhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtkZXNjAAABCAAAADhjcHJ0AAABQAAAAE53dHB0AAABkAAAABRjaGFkAAABpAAAACxyWFlaAAAB0AAAABRiWFlaAAAB5AAAABRnWFlaAAAB+AAAABRyVFJDAAACDAAAACBnVFJDAAACLAAAACBiVFJDAAACTAAAACBjaHJtAAACbAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAABwAAAAcAHMAUgBHAEIAIABiAHUAaQBsAHQALQBpAG4AAG1sdWMAAAAAAAAAAQAAAAxlblVTAAAAMgAAABwATgBvACAAYwBvAHAAeQByAGkAZwBoAHQALAAgAHUAcwBlACAAZgByAGUAZQBsAHkAAAAAWFlaIAAAAAAAAPbWAAEAAAAA0y1zZjMyAAAAAAABDEoAAAXj///zKgAAB5sAAP2H///7ov///aMAAAPYAADAlFhZWiAAAAAAAABvlAAAOO4AAAOQWFlaIAAAAAAAACSdAAAPgwAAtr5YWVogAAAAAAAAYqUAALeQAAAY3nBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltwYXJhAAAAAAADAAAAAmZmAADypwAADVkAABPQAAAKW2Nocm0AAAAAAAMAAAAAo9cAAFR7AABMzQAAmZoAACZmAAAPXP/bAEMACAYGBwYFCAcHBwkJCAoMFA0MCwsMGRITDxQdGh8eHRocHCAkLicgIiwjHBwoNyksMDE0NDQfJzk9ODI8LjM0Mv/bAEMBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/AABEIAIAAgAMBIgACEQEDEQH/xAAcAAABBAMBAAAAAAAAAAAAAAABAAUGBwIDBAj/xAA2EAABAwMBBgMHAwQDAQAAAAABAAIDBAUREgYTITFBUSJxgRQyYZGxwdEHQqEkUmLhFRYjkv/EABoBAAIDAQEAAAAAAAAAAAAAAAIDAAEEBQb/xAAkEQACAgIDAAEEAwAAAAAAAAAAAQIRAyEEEjETBSJRcTJBYf/aAAwDAQACEQMRAD8AuIIoIogAooIqygorB72xsc97g1rRkk9FFrlfnVD3Rwu0Qj5uQyko+hRi5eEjlr6aEkOlBI6N4rSbpCG6j4R0zzPoFEIpZpn+Ahv+TuJ9E9Qtipodc0haD15ud5BI+Vsb8aXoq/a6GgJ1UsrgBknTj6rgp/1JtEkgjnbNTk9Xxkt/+m5Cbrvbam9sc2XeU9G0jTFry6Q9M/hddk/T6kpId7UwNmqJCOBOGxjoD3KLvIroiX0VxprhCJaeVr2njlpyutR+k2dlttQZ4KwMZpwIGjwD5lbI785leaSppZWHmJG+JpHfKYppgOLQ9pIAhwBHIpIwBJFJBQhgiEAiFRYQkgmzaCuNDaZHsOJHeBvmVG6VkSt0Me0l93spoqY5Y0+N3Qn8JgjdrcA3xOPU9f8AS485Jy4c8ucep/CzirNBIh4D9zz1WGU7dmyMElRIIXspeBw+fGeJ4N8/wtsEstTUtHFzz1Pb7BNVHvJQA0EAnOo83fH/AGpBR7qniw14yfekz9+qFMNxHiljYwjhqc3kTxPxwnaIZA+6ZoJWDGhjnZ68gnaEvewftHw4BOixTVGc2GsOdI4c3KFXmSuq75Rw0kQ3EWZKieQaQG8g0D4n7KauaGgiNu8eeJJPBN89JLUN8btWg5HDAL++OwUZSMbTWxV9vZNFqxyIcMEELuTdTBtNUbiP3A0D5BOC0QdozzVMWUksoIwTBFBIKEMlFdtJSIKaMHHEuKlKg+3Ly6rgizhugl3wHVLyv7WMxK5Ih8k2+IAJEecNGeLvj5LvoossDsZHl9E2x6ZZNTvDGPp2WFde45P6WlqI4tPAZIGT6rAb0vwSiOox4RgA+84nn6ruiuAhLdA1n+5x5Kt6SsrYagtqqkyuJ8Jxj+FLpIql9qM0b9GW8Ceioaoa2TigrXStDsMb8SOKeYtUgGpxLe5+wVQ2eouftIabs52T7ugHPqrOtNNX7gb+r3zSPE1zNJPljknQaehGSFDo6piax5Em7iZ78h+gXJV1OId7lzIgzIYOePyue4QvxGGs8OsAN6D/ACPfH1QinirgZmODoi4Mb5BFYlqjfSsc58kjxgkN4dua61wWWqFbb2VGCDM4uAPMN6LsJ4p+LwRlM8pZWGUU0UBFYhFUWFV/t0S67xR8muhGT8MqwFDNvKJz4IqxgyWjQ49uyXl3EbidSKxrp31VWaKnJaxoySO6aX7INZG9swlcHuD3OyMkjlxKdLWA2uqJH/3NH8KRVNWz2XJ7LCm1tHSUIyWyL0NvdC6CnBeQHjRqOSB2VwVdnd/1YwRt/wDQx8Pkq4sX9XdoXubpZrGCeo7q7i3eW0OjbqLW8B3RRjdkm+tJHn6usdbV1JY6rnpmBww5jT4QPLn6q09jLdcKBsRgv0lZSFgaaaoYXBuBza4kuB7g5HwCa6y50tRWvi3ZjeHYc1wwQVMdm42NaC3lhXBu6JkikuzHS4QuNuqCPf3biPPCqj9OdonubHa6txLyXkPJ65JH1x6K27tKYrXVPAyRE/A7nBVE7OUEtJtDSs0k6JwHO8zghMemZ6bjZcdqjZT0jo2DAY4tC68rVBHuosY4klx81sWnGqiYcjuRkllAIhGCBFBFUWFc9dSR11FLTyDLXtI8l0BJUXZRt4tNRZ7hPFI3Trw5p6HHBcEk0jgwO93l6q3tsrJ/y1oL4WZqYTqZ8R1H0VRVEDKqikgkaQRkdiCsOWHWR0+Pk7RFRzVNHXQmNwc1pHAHBVq2m+19QIzTgMhaMFsjclx+ap2wW6gn3dNXvqIpA7G+DstcB9CrVtVqsVDa4Zpa2eUmPIDS4knIzgD4FUou9Dvtqpe/oZ9qrfUR1Elw3ZDy7UeGAVKtibgKi3skzwPDj0KiV7ornc6xk8EtdTW+QhraSZ+S49SW8cAeamWzlsFupBG39ztXkotSKl/CmO21N3pbLs7U3GtL/Z4tOsMGScuAwB6qK7JUrbs1t6ex+5kOuESBoceJ4uDeGfJP+1NpO0NLSWyRgNE6cS1Rzza3iGjzOPknKCnipadkEEbY4o2hrWtGAAFojj7O2YJ5eq6oyKCywlhaTIBEJJKEMQigEVRYUViioQJAIIPVVrtzYW0FY2507cQVLtMoH7X9/X6hWVlcl0pKWvtlRTVuPZ3sOs5xpxx1A9COaDJDtGhuKbhKyjW2uT2newSuZq544g+in2ytGYpGzTPMj28WgNAwofRV0cFU6F7w5oOGudw1DoVPbRdKCBrdU0eojg1pyT6BYbr+zsd5dKRIvZN6/ey4yPhyXRTx+PDeXfssaZz6wBzssj6N6nzTiyJrAABgI1vaMrdaZp06SQTniktkvv5WtbIO4o5+RVJgwkikjAAkigVCGsJZWuSaOGMySvaxg5uccAJiqtqqeNxbSxOmP9x8I/KCU4x9DjCUvESIJuvG0Fp2fp2zXWvhpWPzo3h4uxzwBxKi1XtTcJGnS5sDe7Bx+ZVD7WX+p2gvs1TNM+VkZ3cOp2fCD9+amOayPReTG4LZaF2/XVjKmRlotTZIG5DZal5Bce+kch5lcLNqL5erSJrhXPd7SNRiYA2No6AAKocHGOqs21NJs1K3HERgfwg5T6xSQzixTk2zAtEziCn6wwbmoa4DHHoE1tgO9BA9FJLfTua0ODeK5sjpw0WFaagua0Ek+akAcC3KiNnbI0AkKTsfiLJTsb0IyrZue3U3yULuW39stV+fbKlkmmMAPmZ4sPPTCeNoL9HZbPUVbiCWN8I7novPE9TLVVktTM4ukkLnuJ6kldPg4fkk2/DncyfSKr09C2zaizXZzI6SvidM/lE7wv8AkU7rznsdUvG1Nvbk5FWz6r0O2XuPkj5EYYpJJ+isPfIm6NqCQcDySSk0/A2mvStrpepLtWu0kimYcRt+5+K1sZlqa6LmMp13ga1cuUnJ2zrQioqkM21VULfs7VzA4foLWeZ4fdUnjAHmrI/Uiv8A6OmpQffeXkfAD8lVyBlkY75K6XDhWO/yc7ly++vwGMZljGM5I+qvWlpab2eMNiDQGjgAqNb4J2EftwR6cV6Et0Daihp5WjwyRtcPUIebGkhnCabZjTWykmOHsHDkU7U9BHF7ucLXFTljuSc4W8srnUb26OmmeI2Dgt7qzIw44C1BgwmLaq7w2a0S1Dj4sYYM8S7oEyKb0hcmvWRD9S9pI6qaCz0rsiM7ydw79B6c/kq/Mni7cM/RYmd9XUyVEpJe4l7s9StD3nWT105+y9NxsXw4lE8/nyfLkch32Lk07X21zjw3+r5L0HHUa25yvPWxzc7YW9nYk/wVdrKgsAHRcn6lKpx/R0+BG4N/6P8AFL4hxTg2IvZkc1HqSoy8EqUUUgfGFjxt3o0ZUq2f/9k="}),"getIdentity")},Qo=o(()=>{const t=R(s=>s.breakpoints.down("md"));return e.jsx(de,{perPage:24,sort:{field:"name",order:"ASC"},actions:e.jsx(en,{}),children:e.jsxs(d,{sx:{display:"flex"},children:[!t&&e.jsx(Xo,{}),e.jsx(d,{sx:{flex:1},children:e.jsx(Jo,{})})]})})},"ProductList"),Jo=o(()=>{const{data:t,isLoading:s}=V(),r=ys(),n=R(r.breakpoints.down("sm")),i=R(r.breakpoints.between("sm","md")),a=R(r.breakpoints.between("md","lg")),l=R(r.breakpoints.between("lg","xl"));let u=12;n?u=2:i?u=3:a?u=4:l&&(u=6);const x=`calc(${100/u}% - 16px)`;return s?e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:2,alignItems:"stretch"},children:Array.from({length:12}).map((h,g)=>e.jsxs(k,{sx:{width:x,minWidth:"200px",height:300,display:"flex",flexDirection:"column"},children:[e.jsx(d,{sx:{height:200,bgcolor:"grey.200"}}),e.jsxs(D,{sx:{flex:1},children:[e.jsx(d,{sx:{height:20,bgcolor:"grey.200",mb:1}}),e.jsx(d,{sx:{height:16,bgcolor:"grey.200",width:"60%"}})]})]},g))}):!t||t.length===0?e.jsx(d,{sx:{textAlign:"center",py:4},children:e.jsx(c,{variant:"h6",color:"textSecondary",children:"No products found"})}):e.jsx(d,{sx:{display:"flex",flexWrap:"wrap",gap:2,alignItems:"stretch"},children:t.map(h=>e.jsx(d,{sx:{width:x,minWidth:"200px"},children:e.jsx(Ge,{value:h,children:e.jsx(Zo,{})})},h.id))})},"ProductGrid"),Zo=o(()=>{const t=P(),s=ys();return t?e.jsxs(k,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:s.shadows[4]}},children:[e.jsx(Ie,{component:"img",height:"200",image:Array.isArray(t.image_url)?t.image_url.length>0?t.image_url[0]:"/placeholder-product.svg":t.image_url||"/placeholder-product.svg",alt:t.name,sx:{objectFit:"cover",bgcolor:"grey.100"},onError:o(r=>{r.target.src="/placeholder-product.svg"},"onError")}),e.jsxs(D,{sx:{flex:1,pb:1},children:[e.jsx(c,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontSize:"1rem",fontWeight:600,lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:t.name}),t.name_la&&e.jsx(c,{variant:"body2",color:"textSecondary",sx:{mb:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name_la}),e.jsx(c,{variant:"body2",color:"textSecondary",sx:{mb:1,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",minHeight:"2.5em"},children:t.description}),e.jsxs(c,{variant:"h6",color:"primary",sx:{fontWeight:600,fontSize:"1.1rem"},children:["$",Number(t.price).toFixed(2)]})]}),e.jsxs(bs,{sx:{pt:0,justifyContent:"space-between"},children:[e.jsxs(d,{children:[e.jsx(Le,{size:"small",component:"a",href:`#/products/${t.id}/show`,sx:{color:"info.main"},children:e.jsx(io,{fontSize:"small"})}),e.jsx(Le,{size:"small",component:"a",href:`#/products/${t.id}`,sx:{color:"primary.main"},children:e.jsx(ao,{fontSize:"small"})})]}),e.jsx(c,{variant:"caption",color:"textSecondary",children:new Date(t.created).toLocaleDateString()})]})]}):null},"ProductCard"),Xo=o(()=>{U();const t=gt(),s=W(),{setFilters:r,filterValues:n}=V(),[i,a]=p.useState([]),[l,u]=p.useState(!0),[x,h]=p.useState("");p.useEffect(()=>{o(async()=>{try{const{data:_}=await t.getList("categories",{pagination:{page:1,perPage:100},sort:{field:"name",order:"ASC"},filter:{}});a(_)}catch{s("Error loading categories",{type:"warning"})}finally{u(!1)}},"fetchCategories")()},[t,s]);const g=o(m=>{const F=n.category_id===m?void 0:m;r({...n,category_id:F},null)},"handleCategoryToggle"),A=o(m=>{const _=m.target.value;h(_),r({...n,q:_},null)},"handleSearchChange"),j=o((m,_)=>{r({...n,[m]:_},null)},"handleSalesFilter"),C=o((m,_)=>{r({...n,[m]:_},null)},"handleStockFilter");return e.jsx(k,{sx:{order:-1,mr:2,width:"16em"},children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Filters"}),e.jsx(pt,{fullWidth:!0,placeholder:"Search products...",value:x,onChange:A,size:"small",sx:{mb:3},InputProps:{startAdornment:e.jsx(oo,{position:"start",children:e.jsx(no,{sx:{color:"text.secondary"}})})}}),e.jsx(c,{variant:"subtitle2",sx:{mt:2,mb:1,display:"flex",alignItems:"center"},children:"💰 SALES"}),e.jsxs(Ue,{dense:!0,sx:{py:0},children:[e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{onClick:o(()=>j("sales_best",!n.sales_best),"onClick"),sx:{py:.5},children:[e.jsx(X,{sx:{minWidth:32},children:n.sales_best&&e.jsx(ee,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:"Best sellers",primaryTypographyProps:{variant:"body2"}})]})}),e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{onClick:o(()=>j("sales_average",!n.sales_average),"onClick"),sx:{py:.5},children:[e.jsx(X,{sx:{minWidth:32},children:n.sales_average&&e.jsx(ee,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:"Average",primaryTypographyProps:{variant:"body2"}})]})}),e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{onClick:o(()=>j("sales_low",!n.sales_low),"onClick"),sx:{py:.5},children:[e.jsx(X,{sx:{minWidth:32},children:n.sales_low&&e.jsx(ee,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:"Low",primaryTypographyProps:{variant:"body2"}})]})}),e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{onClick:o(()=>j("sales_never",!n.sales_never),"onClick"),sx:{py:.5},children:[e.jsx(X,{sx:{minWidth:32},children:n.sales_never&&e.jsx(ee,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:"Never sold",primaryTypographyProps:{variant:"body2"}})]})})]}),e.jsx(c,{variant:"subtitle2",sx:{mt:2,mb:1,display:"flex",alignItems:"center"},children:"📊 STOCK"}),e.jsxs(Ue,{dense:!0,sx:{py:0},children:[e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{onClick:o(()=>C("stock_out",!n.stock_out),"onClick"),sx:{py:.5},children:[e.jsx(X,{sx:{minWidth:32},children:n.stock_out&&e.jsx(ee,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:"Out of stock",primaryTypographyProps:{variant:"body2"}})]})}),e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{onClick:o(()=>C("stock_low",!n.stock_low),"onClick"),sx:{py:.5},children:[e.jsx(X,{sx:{minWidth:32},children:n.stock_low&&e.jsx(ee,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:"1-9 items",primaryTypographyProps:{variant:"body2"}})]})}),e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{onClick:o(()=>C("stock_medium",!n.stock_medium),"onClick"),sx:{py:.5},children:[e.jsx(X,{sx:{minWidth:32},children:n.stock_medium&&e.jsx(ee,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:"10-49 items",primaryTypographyProps:{variant:"body2"}})]})}),e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{onClick:o(()=>C("stock_high",!n.stock_high),"onClick"),sx:{py:.5},children:[e.jsx(X,{sx:{minWidth:32},children:n.stock_high&&e.jsx(ee,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:"50 items and more",primaryTypographyProps:{variant:"body2"}})]})})]}),e.jsx(c,{variant:"subtitle2",sx:{mt:2,mb:1,display:"flex",alignItems:"center"},children:"🏷️ CATEGORIES"}),l?e.jsx(c,{variant:"body2",color:"textSecondary",children:"Loading categories..."}):e.jsx(Ue,{dense:!0,sx:{py:0},children:i.map(m=>e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{onClick:o(()=>g(m.id),"onClick"),sx:{py:.5},children:[e.jsx(X,{sx:{minWidth:32},children:n.category_id===m.id&&e.jsx(ee,{fontSize:"small",color:"primary"})}),e.jsx(Q,{primary:m.name,primaryTypographyProps:{variant:"body2"}})]})},m.id))})]})})},"ProductFilters"),en=o(()=>{const t=R(s=>s.breakpoints.down("md"));return e.jsxs(Y,{children:[t&&e.jsx(Be,{}),e.jsx(cr,{fields:["name","price","created","updated"]}),e.jsx(we,{}),e.jsx(Fe,{})]})},"ListActions$1"),ot=p.lazy(()=>Te(()=>import("./vendor-B8RineCB.js").then(t=>t.bz),__vite__mapDeps([0,1,2,3]),import.meta.url).then(t=>({default:t.RichTextInput}))),tn=o(()=>{const t=$(),{defaultTitle:s}=ve();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"ProductTitle$2"),sn=o(()=>e.jsx(me,{title:e.jsx(tn,{}),children:e.jsxs(N,{sx:{maxWidth:"40em"},children:[e.jsx(v,{source:"name",validate:S(),fullWidth:!0}),e.jsx(v,{source:"name_la",label:"Name (Lao)",fullWidth:!0}),e.jsx(p.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ot,{source:"description",validate:S(),fullWidth:!0})}),e.jsx(p.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ot,{source:"description_la",label:"Description (Lao)",fullWidth:!0})}),e.jsx(Ke,{source:"price",validate:S(),min:0,step:.01,fullWidth:!0}),e.jsx(le,{source:"category_id",reference:"categories",children:e.jsx(se,{source:"name",fullWidth:!0,validate:S()})}),e.jsx(os,{source:"image_url",label:"Image URLs",children:e.jsx(ns,{inline:!0,children:e.jsx(v,{source:"",label:"Image URL",fullWidth:!0,helperText:"Enter image URL"})})}),e.jsx(p.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ot,{source:"details",fullWidth:!0})})]})}),"ProductEdit"),nt=p.lazy(()=>Te(()=>import("./vendor-B8RineCB.js").then(t=>t.bz),__vite__mapDeps([0,1,2,3]),import.meta.url).then(t=>({default:t.RichTextInput}))),rn=o(()=>{const t=$(),{defaultTitle:s}=ft();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"ProductTitle$1"),on=o(()=>e.jsx(Ce,{title:e.jsx(rn,{}),children:e.jsxs(N,{sx:{maxWidth:"40em"},children:[e.jsx(v,{autoFocus:!0,source:"name",validate:S(),fullWidth:!0}),e.jsx(v,{source:"name_la",label:"Name (Lao)",fullWidth:!0}),e.jsx(p.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(nt,{source:"description",validate:S(),fullWidth:!0})}),e.jsx(p.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(nt,{source:"description_la",label:"Description (Lao)",fullWidth:!0})}),e.jsx(Ke,{source:"price",validate:S(),min:0,step:.01,fullWidth:!0}),e.jsx(le,{source:"category_id",reference:"categories",children:e.jsx(se,{source:"name",fullWidth:!0,validate:S()})}),e.jsx(os,{source:"image_url",label:"Image URLs",children:e.jsx(ns,{inline:!0,children:e.jsx(v,{source:"",label:"Image URL",fullWidth:!0,helperText:"Enter image URL"})})}),e.jsx(p.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(nt,{source:"details",fullWidth:!0})})]})}),"ProductCreate"),nn=o(()=>{const t=$(),{defaultTitle:s}=is();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"ProductTitle"),an=o(()=>{const t=P();if(!t)return null;const r=(Array.isArray(t.image_url)?t.image_url:[t.image_url]).filter(n=>n&&n.trim()!=="");return r.length===0?e.jsx(Ie,{component:"img",image:"/placeholder-product.svg",alt:t.name||"Product image",sx:{width:"100%",height:"auto",borderRadius:2,maxHeight:400,objectFit:"cover",bgcolor:"grey.100"}}):r.length===1?e.jsx(Ie,{component:"img",image:r[0],alt:t.name||"Product image",sx:{width:"100%",height:"auto",borderRadius:2,maxHeight:400,objectFit:"cover",bgcolor:"grey.100"},onError:o(n=>{n.target.src="/placeholder-product.svg"},"onError")}):e.jsx(uo,{variant:"masonry",cols:2,gap:8,children:r.map((n,i)=>e.jsx(xo,{children:e.jsx(Ie,{component:"img",image:n,alt:`${t.name||"Product"} image ${i+1}`,sx:{width:"100%",height:"auto",borderRadius:2,objectFit:"cover",bgcolor:"grey.100"},onError:o(a=>{a.target.src="/placeholder-product.svg"},"onError")})},i))})},"ProductImage"),ln=o(()=>e.jsx(Qe,{title:e.jsx(nn,{}),children:e.jsx(d,{sx:{p:2},children:e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{size:{xs:12,md:5},children:e.jsx(k,{sx:{height:"fit-content"},children:e.jsx(D,{children:e.jsx(an,{})})})}),e.jsx(y,{size:{xs:12,md:7},children:e.jsx(k,{children:e.jsxs(D,{children:[e.jsxs(d,{sx:{mb:3},children:[e.jsx(w,{source:"name",sx:{"& .RaTextField-text":{fontSize:"2rem",fontWeight:600,color:"primary.main",mb:1}}}),e.jsx(w,{source:"name_la",label:"",sx:{"& .RaTextField-text":{fontSize:"1.2rem",color:"text.secondary",fontStyle:"italic"}}})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ct,{color:"success",sx:{mr:1}}),e.jsx(yt,{source:"price",sx:{"& .RaNumberField-text":{fontSize:"1.5rem",fontWeight:600,color:"success.main"}}})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(As,{color:"primary",sx:{mr:1}}),e.jsx(z,{source:"category_id",reference:"categories",children:e.jsx(St,{label:e.jsx(w,{source:"name"}),color:"primary",variant:"outlined"})})]}),e.jsx(He,{sx:{my:2}}),e.jsxs(d,{sx:{mb:2},children:[e.jsx(c,{variant:"h6",sx:{mb:1,color:"text.primary"},children:"Description"}),e.jsx(w,{source:"description",sx:{"& .RaTextField-text":{lineHeight:1.6,color:"text.secondary"}}}),e.jsx(d,{sx:{mt:1},children:e.jsx(w,{source:"description_la",label:"",sx:{"& .RaTextField-text":{lineHeight:1.6,color:"text.secondary",fontStyle:"italic"}}})})]}),e.jsxs(_t,{sx:{p:2,backgroundColor:"grey.50"},children:[e.jsx(c,{variant:"h6",sx:{mb:2,color:"text.primary"},children:"Product Details"}),e.jsx(w,{source:"details",sx:{"& .RaTextField-text":{lineHeight:1.6}}})]}),e.jsx(He,{sx:{my:2}}),e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{size:{xs:6},children:e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(lo,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(d,{children:[e.jsx(c,{variant:"caption",display:"block",color:"text.secondary",children:"Created"}),e.jsx(T,{source:"created"})]})]})}),e.jsx(y,{size:{xs:6},children:e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(co,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(d,{children:[e.jsx(c,{variant:"caption",display:"block",color:"text.secondary",children:"Updated"}),e.jsx(T,{source:"updated"})]})]})})]})]})})})]})})}),"ProductShow"),Bt={list:Qo,create:on,edit:sn,show:ln,icon:ho,recordRepresentation:o(t=>t.name||`Product ${t.id}`,"recordRepresentation")},cn=o(()=>{const t=P(),s=U();return t?e.jsxs(pe,{size:"small",color:"primary",component:ts,to:{pathname:"/products",search:as.stringify({filter:{category_id:t.id}})},sx:{display:"inline-flex",alignItems:"center"},children:[e.jsx(Bt.icon,{sx:{paddingRight:"0.5em"}}),s("resources.categories.fields.products")]}):null},"LinkToRelatedProducts"),dn=o(()=>{const t=$(),{defaultTitle:s}=V();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"CategoriesTitle"),un=o(()=>e.jsx(de,{sort:{field:"name",order:"ASC"},perPage:20,pagination:!1,component:"div",actions:!1,title:e.jsx(dn,{}),children:e.jsx(xn,{})}),"CategoryList"),xn=o(()=>{const{data:t,error:s,isPending:r}=V();return r||s?null:e.jsx(y,{container:!0,spacing:2,sx:{mt:0},children:t.map(n=>e.jsx(Ge,{value:n,children:e.jsx(y,{size:{xs:12,sm:6,md:4,lg:3,xl:2},children:e.jsxs(k,{children:[e.jsx(Ie,{image:`https://marmelab.com/posters/${n.name}-1.jpeg`,sx:{height:140}}),e.jsx(D,{sx:{paddingBottom:"0.5em"},children:e.jsx(c,{variant:"h5",component:"h2",align:"center",children:dr.humanize(n.name)})}),e.jsxs(bs,{sx:{".MuiCardActions-spacing":{display:"flex",justifyContent:"space-around"}},children:[e.jsx(cn,{}),e.jsx(ue,{})]})]})},n.id)},n.id))})},"CategoryGrid"),hn=kt("img")({width:25,maxWidth:25,maxHeight:25,verticalAlign:"middle"}),mn=o(t=>{const s=P();return s?e.jsx(hn,{src:s.thumbnail,alt:""}):null},"ThumbnailField"),pn=o(t=>{const s=P();return s?e.jsx(Je,{to:`/products/${s.id}`,children:s.reference}):null},"ProductRefField"),it=B.Col,De=B.NumberCol,jn=o(()=>e.jsx(me,{title:e.jsx(gn,{}),children:e.jsxs(N,{children:[e.jsx(v,{source:"name"}),e.jsx(he,{label:"resources.categories.fields.products",fullWidth:!0,children:e.jsx(ur,{reference:"products",target:"category_id",perPage:20,children:e.jsxs(B,{children:[e.jsx(it,{sx:{width:25,padding:0},field:mn,label:!1}),e.jsx(it,{source:"reference",field:pn}),e.jsx(De,{source:"price",options:{style:"currency",currency:"USD"}}),e.jsx(De,{source:"width",options:{minimumFractionDigits:2}}),e.jsx(De,{source:"height",options:{minimumFractionDigits:2}}),e.jsx(De,{source:"stock"}),e.jsx(De,{source:"sales"}),e.jsx(it,{align:"right",children:e.jsx(ue,{})})]})})})]})}),"CategoryEdit"),gn=o(()=>{const t=$(),{defaultTitle:s}=ve();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"CategoryTitle"),Fs={list:un,edit:jn,icon:mo},Rs=o(()=>{const{data:t}=tr({queryKey:["currencies"],queryFn:o(async()=>await Go("currency"),"queryFn")});return{currencies:t}},"useCurrency$1"),Ms=p.createContext(void 0),fn=o(({children:t})=>{const{currencies:s}=Rs(),[r,n]=p.useState("USD"),[i,a]=p.useState(1),l=p.useMemo(()=>{switch(r){case"THB":return"฿";case"USD":return"$";case"LAK":return"LAK";default:return r}},[r]);p.useEffect(()=>{const x=s==null?void 0:s.find(h=>(h==null?void 0:h.ccy)===r&&(h==null?void 0:h.type)==="SELL");x&&a(Number(x.rate))},[r,s]);const u=p.useCallback(x=>x/i,[i]);return e.jsx(Ms.Provider,{value:{currency:r,displayCurrency:l,rate:i,convert:u,setCurrency:n},children:t})},"CurrencyProvider"),Ft=o(()=>{const t=p.useContext(Ms);if(!t)throw new Error("useCurrencyContext must be used within a CurrencyProvider");return t},"useCurrencyContext"),Ae=o((t,s="en-US")=>{const r=t%1>=.5?Math.ceil(t):Math.floor(t);return new Intl.NumberFormat(s,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(r)},"formatCurrency"),at=o(({data:t})=>{if(!t||!t.items||t.items.length===0)return e.jsxs(k,{elevation:3,sx:{borderRadius:3,p:2},children:[e.jsx(qe,{title:"Pending Orders",titleTypographyProps:{fontWeight:"bold",fontSize:18}}),e.jsx(D,{children:e.jsx(c,{variant:"body2",color:"text.secondary",children:"No pending orders"})})]});const s=o(n=>{try{return xr(hr(n),"MMM dd, yyyy HH:mm")}catch{return n}},"formatDate"),{currency:r}=Ft();return e.jsxs(k,{sx:{borderRadius:"10px",p:2},children:[e.jsx(qe,{sx:{mt:-1},title:`Pending Orders (${t.totalItems})`,subheader:`Showing ${t.items.length} of ${t.totalItems} orders`,titleTypographyProps:{fontWeight:"bold",fontSize:18},subheaderTypographyProps:{color:"text.secondary"}}),e.jsx(D,{sx:{padding:0},children:e.jsx(d,{sx:{overflowX:"auto",maxWidth:630,mx:"auto"},children:e.jsx(Tt,{children:e.jsxs(_e,{size:"small",sx:{minWidth:"800px"},children:[e.jsx(Me,{children:e.jsxs(M,{children:[e.jsx(b,{children:"Reference ID"}),e.jsx(b,{children:"Customer"}),e.jsx(b,{children:"Quantity"}),e.jsx(b,{children:"Amount"}),e.jsx(b,{children:"Status"}),e.jsx(b,{children:"Created"})]})}),e.jsx(ke,{children:t.items.map((n,i)=>e.jsxs(M,{hover:!0,sx:{backgroundColor:i%2===0?"#fafafa":"inherit"},children:[e.jsx(b,{children:e.jsx(d,{children:e.jsx(c,{variant:"body2",fontWeight:"medium",children:n.referenceID})})}),e.jsx(b,{children:e.jsx(d,{display:"flex",flexDirection:"column",children:e.jsx(c,{variant:"body2",fontWeight:"medium",children:n.customerName})})}),e.jsx(b,{children:e.jsx(c,{variant:"body2",children:n.quantity})}),e.jsx(b,{children:e.jsx(d,{children:e.jsxs(c,{variant:"body2",fontWeight:"medium",children:[r==="USD"&&(n==null?void 0:n.amountUSD)&&`${Ae(Number(n==null?void 0:n.amountUSD))} $`,r==="THB"&&(n==null?void 0:n.amountTHB)&&`${Ae(Number(n==null?void 0:n.amountTHB))} ฿`,r==="LAK"&&(n==null?void 0:n.amountLAK)&&`${Ae(Number(n==null?void 0:n.amountLAK))} ₭`]})})}),e.jsx(b,{children:e.jsx(St,{label:n.status,color:n.status==="pending"?"warning":n.status==="completed"?"success":"default",size:"small",variant:"filled"})}),e.jsx(b,{children:e.jsx(c,{variant:"caption",color:"text.secondary",children:s(n.created)})})]},n.id))})]})})})})]})},"OrderPendingList"),yn=o(({onFilterChange:t})=>{const[s,r]=p.useState(!1),[n,i]=p.useState(!1),[a,l]=p.useState(!1),[u,x]=p.useState(Wt().subtract(30,"day")),[h,g]=p.useState(Wt()),A=o(m=>{i(m),m&&l(!1),t({isYear:m?!1:a,...m?{}:{startDate:u==null?void 0:u.format("YYYY-MM-DD"),endDate:h==null?void 0:h.format("YYYY-MM-DD")}})},"handleMonthCheck"),j=o(m=>{l(m),m&&i(!1),t({isYear:!!m,...m?{}:{startDate:u==null?void 0:u.format("YYYY-MM-DD"),endDate:h==null?void 0:h.format("YYYY-MM-DD")}})},"handleYearCheck"),C=o(()=>{u&&h&&t({isYear:a,...!n&&!a?{startDate:u.format("YYYY-MM-DD"),endDate:h.format("YYYY-MM-DD")}:{}})},"handleDateChange");return ze.useEffect(()=>{C()},[u,h,a,n]),e.jsx(ws,{dateAdapter:vs,children:e.jsxs(d,{sx:{position:"relative"},children:[e.jsx(Le,{onClick:o(()=>r(!s),"onClick"),sx:{color:"#666",border:"1px solid #e0e0e0",borderRadius:1,p:1},children:s?e.jsx(Cs,{}):e.jsx(po,{})}),e.jsx(Ss,{in:s,children:e.jsxs(d,{sx:{position:"absolute",top:"100%",right:0,mt:1,p:2,bgcolor:"white",border:"1px solid #e0e0e0",borderRadius:2,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:320,zIndex:1e3},children:[e.jsx(c,{variant:"subtitle2",sx:{mb:2,fontWeight:600},children:"Filter Options"}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(zt,{control:e.jsx(Ut,{checked:n,onChange:o(m=>A(m.target.checked),"onChange")}),label:"Month"}),e.jsx(zt,{control:e.jsx(Ut,{checked:a,onChange:o(m=>j(m.target.checked),"onChange")}),label:"Year"}),e.jsx(c,{variant:"subtitle2",sx:{mt:2,mb:1,fontWeight:600},children:"Date Range"}),e.jsx(Nt,{label:"Start Date",value:u,onChange:o(m=>x(m),"onChange"),slotProps:{textField:{size:"small"}}}),e.jsx(Nt,{label:"End Date",value:h,onChange:o(m=>g(m),"onChange"),slotProps:{textField:{size:"small"}}})]})]})})]})})},"RevenueFilter"),lt=o(({data:t,onFilterChange:s,loading:r})=>{var g,A,j;const n=[{year:2025,month:6,amountLAK:"15000000",amountUSD:"1000",amountTHB:"35000"}],i=t&&t.length>0?t:n,u=o(C=>{var je;const m=((je=C[0])==null?void 0:je.year)??new Date().getFullYear(),_=new Map(C.map(I=>[I.month,I])),F=[];for(let I=1;I<=12;I++)_.has(I)?F.push(_.get(I)):F.push({year:m,month:I,amountLAK:"0",amountUSD:"0",amountTHB:"0"});return F},"fillMissingMonths")(i).map((C,m)=>({date:`${String(C.month).padStart(2,"0")}/${String(C.year).slice(-2)}`,usd:Number.parseFloat(C.amountUSD),thb:Number.parseFloat(C.amountTHB),lak:Number.parseInt(C.amountLAK)/1e3,day:m+1})),x=o(()=>{var _,F,je;const C=[],m=Number.parseFloat(((_=i[0])==null?void 0:_.amountUSD)||"800");for(let I=1;I<=30;I++){const H=Math.sin(I*.2)*300+Math.random()*200-100,We=Math.max(400,m+H);C.push({date:`${String((F=i[0])==null?void 0:F.month).padStart(2,"0")}/${String((je=i[0])==null?void 0:je.year).slice(-2)}`,usd:Math.round(We),day:I})}return C},"generateSampleData"),h=u.length>=10?u:x();return e.jsxs(k,{className:"w-full",children:[e.jsx(qe,{title:e.jsx(c,{variant:"h6",sx:{fontWeight:"bold",textAlign:"start"},children:"30 Day Revenue History"}),action:s&&e.jsx(yn,{onFilterChange:s})}),e.jsxs(D,{children:[e.jsxs(d,{sx:{height:320,width:"100%",position:"relative"},children:[r&&e.jsx(d,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1},children:e.jsx(_s,{})}),e.jsx(mr,{width:"100%",height:"100%",children:e.jsxs(pr,{data:h,margin:{top:0,right:0,left:-10,bottom:10},children:[e.jsx(jr,{strokeDasharray:"3 3",stroke:"#f0f0f0",horizontal:!0,vertical:!1}),e.jsx(gr,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#666"},interval:"preserveStartEnd"}),e.jsx(fr,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#666"},tickFormatter:o(C=>`$${C}`,"tickFormatter"),domain:[0,2e3],ticks:[0,500,1e3,1500,2e3]}),e.jsx(yr,{type:"monotone",dataKey:"usd",stroke:"#D4A574",strokeWidth:3,dot:!1,activeDot:{r:4,fill:"#D4A574"}})]})})]}),e.jsxs(y,{container:!0,spacing:2,mt:1,children:[e.jsx(y,{size:{xs:12,md:4},children:e.jsxs(d,{sx:{textAlign:"center",p:2,backgroundColor:"#f9fafb",borderRadius:2},children:[e.jsx(c,{variant:"body2",color:"text.secondary",mb:1,children:"LAK"}),e.jsxs(c,{variant:"h6",color:"#a67c00",children:[Number.parseInt(((g=i[0])==null?void 0:g.amountLAK)||"0").toLocaleString()," ","₭"]})]})}),e.jsx(y,{size:{xs:12,md:4},children:e.jsxs(d,{sx:{textAlign:"center",p:2,backgroundColor:"#f9fafb",borderRadius:2},children:[e.jsx(c,{variant:"body2",color:"text.secondary",mb:1,children:"USD"}),e.jsxs(c,{variant:"h6",color:"#a67c00",children:["$",Number.parseFloat(((A=i[0])==null?void 0:A.amountUSD)||"0").toFixed(2)]})]})}),e.jsx(y,{size:{xs:12,md:4},children:e.jsxs(d,{sx:{textAlign:"center",p:2,backgroundColor:"#f9fafb",borderRadius:2},children:[e.jsx(c,{variant:"body2",color:"text.secondary",mb:1,children:"THB"}),e.jsxs(c,{variant:"h6",color:"#a67c00",children:["฿",Number.parseFloat(((j=i[0])==null?void 0:j.amountTHB)||"0").toFixed(2)]})]})})]})]})]})},"SellRevenueChart"),xe=o(({title:t,value:s,icon:r})=>e.jsxs(k,{sx:{height:"100%",borderRadius:2,backgroundColor:"#fff",border:"1px solid #ece7df",boxShadow:"none",px:3,py:3,position:"relative",overflow:"hidden",display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{position:"absolute",left:-60,top:0,bottom:0,width:170,backgroundColor:"#fef1dc",borderTopRightRadius:100,borderBottomRightRadius:180}}),e.jsx(d,{sx:{position:"relative",width:48,height:48,minWidth:48,borderRadius:"50%",backgroundColor:"#fef1dc",color:"#D4AF37",display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,zIndex:1,ml:-1,mr:3,mt:1},children:r}),e.jsxs(d,{sx:{ml:5,flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(c,{variant:"body2",sx:{fontSize:"0.9rem",color:"#7b7462",fontWeight:500},children:t}),e.jsx(c,{variant:"h6",sx:{fontSize:"1.5rem",color:"#000",fontWeight:700},children:s})]})]}),"ModernStatusCard"),ct=o(({sellRevenue:t,orderStatusCount:s,customerCount:r})=>{const{currency:n}=Ft();return e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{size:{xs:12,sm:6,lg:4},children:e.jsx(xe,{title:"Monthly Revenue",value:n==="USD"&&(t!=null&&t.amountUSD)?`${Ae(Number(t==null?void 0:t.amountUSD))} $`:n==="THB"&&(t!=null&&t.amountTHB)?`${Ae(Number(t==null?void 0:t.amountTHB))} ฿`:n==="LAK"&&(t!=null&&t.amountLAK)?`${Ae(Number(t==null?void 0:t.amountLAK))} ₭`:"",icon:e.jsx(d,{children:e.jsx(Ct,{sx:{fontSize:35}})}),color:"#607d8b",bgColor:"#607d8b"})}),e.jsx(y,{size:{xs:12,sm:6,lg:4},children:e.jsx(xe,{title:"Total Customers",value:r,icon:e.jsx(d,{children:e.jsx(jo,{sx:{fontSize:35}})}),color:"#607d8b",bgColor:"#607d8b"})}),e.jsx(y,{size:{xs:12,sm:6,lg:4},children:e.jsx(xe,{title:"Pending Orders",value:s.pending,icon:e.jsx(d,{children:e.jsx(go,{sx:{fontSize:35}})}),color:"#090909",bgColor:"#ff9800"})}),e.jsx(y,{size:{xs:12,sm:6,lg:3},children:e.jsx(xe,{title:"Accepted Orders",value:s.accepted,icon:e.jsx(d,{sx:{fontSize:35},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:e.jsxs("g",{fill:"currentColor",children:[e.jsx("path",{d:"m16.414 10.979l-1.436-1.393l-2.88 2.97l-1.062-1.118l-1.45 1.377l2.498 2.63z"}),e.jsx("path",{fillRule:"evenodd",d:"M6 4a2 2 0 0 1 2-2h8.107l2.146 2.342L21 7.638V17a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2zm8.667 0H8v13h11V9h-2.333a2 2 0 0 1-2-2zm2 1.57l.08.088L17.865 7h-1.198z",clipRule:"evenodd"}),e.jsx("path",{d:"M5 5.5v1H3v-1zM16.5 22h-9c-1.026 0-2.13-.454-2.975-1.201C3.662 20.035 3 18.9 3 17.5v-11h2v11c0 .731.338 1.347.85 1.8c.53.47 1.176.7 1.65.7h9zm0-2h1v2h-1z"})]})})}),color:"#2196f3",bgColor:"#2196f3"})}),e.jsx(y,{size:{xs:12,sm:6,lg:3},children:e.jsx(xe,{title:"Orders Delivering",value:s.delivering,icon:e.jsx(d,{sx:{fontSize:35},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M21.5 2h-14v7.842a5 5 0 0 1 .94-.092h4.685a4.375 4.375 0 0 1 4.093 2.83l1.964-.452a4.06 4.06 0 0 1 2.318.088zm-9 2h4v4l-2-1.5l-2 1.5z"}),e.jsx("path",{fill:"currentColor",d:"m19.54 13.585l-3.553.817a2.87 2.87 0 0 0-.83-2.31a2.88 2.88 0 0 0-2.032-.842H8.439a3.25 3.25 0 0 0-2.301.948L4.086 14.25H0v7.25h11.373l6.197-1.55l3.74-1.594l.026-.014a2.555 2.555 0 0 0-1.797-4.757m-11.584-.24a1.3 1.3 0 0 1 .479-.095h4.69a.875.875 0 1 1 0 1.75H10v2h3.614l6.412-1.475l.02-.005a.556.556 0 0 1 .416 1.022L16.93 18.05l-5.803 1.45H5.5v-3.836l2.05-2.05a1.3 1.3 0 0 1 .406-.27M2 16.25h1.5v3.25H2z"})]})}),color:"#9c27b0",bgColor:"#9c27b0"})}),e.jsx(y,{size:{xs:12,sm:6,lg:3},children:e.jsx(xe,{title:"Completed Orders",value:s.completed,icon:e.jsx(d,{sx:{fontSize:35},children:e.jsx(fo,{fontSize:"inherit"})}),color:"#4caf50",bgColor:"#4caf50"})}),e.jsx(y,{size:{xs:12,sm:6,lg:3},children:e.jsx(xe,{title:"Cancelled Orders",value:s.cancel,icon:e.jsx(d,{sx:{fontSize:35},children:e.jsx(yo,{fontSize:"inherit"})}),color:"#f44336",bgColor:"#f44336"})})]})},"StatusCountCards"),bn=o(()=>{const[t,s]=p.useState({statusCount:null,orderList:null,loading:!0,error:null});return p.useEffect(()=>{o(async()=>{try{s(a=>({...a,loading:!0,error:null}));const[n,i]=await Promise.all([f.send("/dashboard/status-count",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f.authStore.token}`}}),f.send("/order-list?page=1&perPage=10&status=pending",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f.authStore.token}`}})]);s({statusCount:n,orderList:i,loading:!1,error:null})}catch(n){console.error("Error fetching static dashboard data:",n),s(i=>({...i,loading:!1,error:n instanceof Error?n.message:"Failed to fetch static dashboard data"}))}},"fetchStaticDashboardData")()},[]),t},"useStaticDashboardData"),An=o(t=>{const[s,r]=p.useState({sellRevenue:null,loading:!0,error:null});return p.useEffect(()=>{o(async()=>{try{r(u=>({...u,loading:!0,error:null}));const i=new URLSearchParams;(t==null?void 0:t.isYear)!==void 0&&i.append("isYear",t.isYear.toString()),t!=null&&t.startDate&&i.append("startDate",t.startDate),t!=null&&t.endDate&&i.append("endDate",t.endDate);const a=`/dashboard/sell-revenue${i.toString()?`?${i.toString()}`:""}`,l=await f.send(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f.authStore.token}`}});r({sellRevenue:l.sell,loading:!1,error:null})}catch(i){console.error("Error fetching revenue data:",i),r(a=>({...a,loading:!1,error:i instanceof Error?i.message:"Failed to fetch revenue data"}))}},"fetchRevenueData")()},[t==null?void 0:t.isYear,t==null?void 0:t.startDate,t==null?void 0:t.endDate]),s},"useRevenueData"),q={flex:{display:"flex"},flexColumn:{display:"flex",flexDirection:"column"},leftCol:{flex:1,marginRight:"0.5em"},rightCol:{flex:1,marginLeft:"0.5em"},singleCol:{marginTop:"1em",marginBottom:"1em"}},dt=o(()=>e.jsx("span",{style:{height:"1em"}}),"VerticalSpacer"),wn=o(()=>{const t=R(m=>m.breakpoints.down("sm")),s=R(m=>m.breakpoints.down("lg")),[r,n]=p.useState({isYear:!1,startDate:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),{statusCount:i,orderList:a,loading:l,error:u}=bn(),{sellRevenue:x,loading:h,error:g}=An(r),A=l,j=u||g,C=o(m=>{n(m)},"handleFilterChange");return A?e.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(_s,{})}):j?e.jsx(d,{p:2,children:e.jsx(Dt,{severity:"error",sx:{mb:2},children:j})}):t?e.jsx("div",{children:e.jsxs("div",{style:q.flexColumn,children:[e.jsx(dt,{}),i&&e.jsxs(e.Fragment,{children:[e.jsx(ct,{sellRevenue:x==null?void 0:x[0],orderStatusCount:i.orderStatusCount,customerCount:i.customerCount,sellAmount:i.sellAmount}),e.jsx(dt,{})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx(lt,{data:x,onFilterChange:C,loading:h}),e.jsx(dt,{})]}),a&&e.jsx(at,{data:a})]})}):s?e.jsxs("div",{style:q.flexColumn,children:[i&&e.jsx("div",{style:q.singleCol,children:e.jsx(ct,{sellRevenue:x==null?void 0:x[0],orderStatusCount:i.orderStatusCount,customerCount:i.customerCount,sellAmount:i.sellAmount})}),x&&e.jsx("div",{style:q.singleCol,children:e.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(lt,{data:x,onFilterChange:C,loading:h})})})}),a&&e.jsx("div",{style:q.singleCol,children:e.jsx(at,{data:a})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:q.singleCol,children:i&&e.jsx(ct,{sellRevenue:x==null?void 0:x[0],orderStatusCount:i.orderStatusCount,customerCount:i.customerCount,sellAmount:i.sellAmount})}),e.jsxs("div",{style:q.flex,children:[e.jsx("div",{style:q.leftCol,children:x&&e.jsx("div",{style:q.singleCol,children:e.jsx(lt,{data:x,onFilterChange:C,loading:h})})}),e.jsx("div",{style:q.rightCol,children:a&&e.jsx("div",{style:q.singleCol,children:e.jsx(at,{data:a})})})]})]})},"Dashboard$1"),vn=wn,Ht="http://localhost:8080",qt={getList:o(async(t,s)=>{if(t!=="orders")throw new Error(`Unknown resource: ${t}`);const{page:r=1,perPage:n=25}=s.pagination||{},{status:i}=s.filter||{},a="/order-list";try{const l=new URLSearchParams({page:r.toString(),perPage:n.toString(),...i&&{status:i}}),x=await f.send(`${a}?${l}`,{method:"GET"});return{data:x.items,total:x.totalItems,pageInfo:{hasNextPage:x.page<x.totalPages,hasPreviousPage:x.page>1}}}catch(l){throw console.error("Error fetching orders:",l),l}},"getList"),getOne:o(async(t,s)=>{if(t!=="orders")throw new Error(`Unknown resource: ${t}`);const r=await fetch(`${Ht}/order-list?perPage=1000`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f.authStore.token}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=(await r.json()).items.find(a=>a.id===s.id.toString());if(!i)throw new Error(`Order with id ${s.id} not found`);return{data:i}},"getOne"),getMany:o(async(t,s)=>{if(t!=="orders")throw new Error(`Unknown resource: ${t}`);const r=await fetch(`${Ht}/order-list?perPage=1000`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f.authStore.token}`}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return{data:(await r.json()).items.filter(a=>s.ids.includes(a.id.toString()))}},"getMany"),create:o(async()=>{throw new Error("Create operation not supported for orders")},"create"),update:o(async()=>{throw new Error("Update operation not supported for orders")},"update"),delete:o(async()=>{throw new Error("Delete operation not supported for orders")},"delete"),deleteMany:o(async()=>{throw new Error("Delete many operation not supported for orders")},"deleteMany"),updateMany:o(async()=>{throw new Error("Update many operation not supported for orders")},"updateMany"),getManyReference:o(async()=>{throw new Error("Get many reference operation not supported for orders")},"getManyReference")},fe={async getList(t=1,s=10,r="-created",n=""){const i={page:t,perPage:s,sort:r};n&&(i.filter=n);const a=await f.collection("blogs").getList(t,s,i);return{data:a.items,total:a.totalItems}},async getOne(t){return await f.collection("blogs").getOne(t)},async create(t){return await f.collection("blogs").create(t)},async update(t,s){return await f.collection("blogs").update(t,s)},async delete(t){return await f.collection("blogs").delete(t),{id:t}},async deleteMany(t){const s=[];for(const r of t)try{await f.collection("blogs").delete(r),s.push(r)}catch(n){console.error(`Failed to delete blog ${r}:`,n)}return{ids:s}}},Yt={getList:o(async(t,s)=>{if(t!=="blogs")return{data:[],total:0};const{page:r,perPage:n}=s.pagination||{page:1,perPage:25},{field:i,order:a}=s.sort||{},{filter:l}=s;let u="";i&&a&&(u=a==="ASC"?i:`-${i}`);let x="";if(l){const g=[];l.title&&g.push(`title ~ "${l.title}"`),l.description&&g.push(`description ~ "${l.description}"`),l.q&&g.push(`(title ~ "${l.q}" || description ~ "${l.q}")`),x=g.join(" && ")}const h=await fe.getList(r,n,u,x);return{data:h.data,total:h.total}},"getList"),getOne:o(async(t,s)=>t!=="blogs"?{data:{}}:{data:await fe.getOne(String(s.id))},"getOne"),create:o(async(t,s)=>t!=="blogs"?{data:{}}:{data:await fe.create({title:s.data.title,description:s.data.description,image_url:s.data.image_url||"",video_url:s.data.video_url||"",count:s.data.count||0})},"create"),update:o(async(t,s)=>t!=="blogs"?{data:{}}:{data:await fe.update(String(s.id),{title:s.data.title,description:s.data.description,image_url:s.data.image_url,video_url:s.data.video_url,count:s.data.count})},"update"),delete:o(async(t,s)=>t!=="blogs"?{data:{}}:(await fe.delete(String(s.id)),{data:{id:s.id}}),"delete"),deleteMany:o(async(t,s)=>t!=="blogs"?{data:[]}:{data:(await fe.deleteMany(s.ids.map(String))).ids},"deleteMany")},Gt={getList:o(async(t,s)=>{const{page:r,perPage:n}=s.pagination||{page:1,perPage:10},{field:i,order:a}=s.sort||{field:"id",order:"ASC"},{q:l,...u}=s.filter;try{let x="";const h=[];l&&h.push(`(name ~ "${l}" || email ~ "${l}" || username ~ "${l}")`),Object.entries(u).forEach(([A,j])=>{j!=null&&j!==""&&(A==="has_ordered"?j===!0?h.push('id IN (SELECT DISTINCT customer_id FROM orders WHERE customer_id != "")'):h.push('id NOT IN (SELECT DISTINCT customer_id FROM orders WHERE customer_id != "")'):A==="customer_id"?h.push(`id = "${j}"`):typeof j=="boolean"?h.push(`${A} = ${j}`):typeof j=="string"?h.push(`${A} ~ "${j}"`):h.push(`${A} = ${j}`))}),h.length>0&&(x=h.join(" && "));const g=await f.collection("customers").getList(r,n,{sort:a==="ASC"?`+${i}`:`-${i}`,filter:x||void 0});return{data:g.items,total:g.totalItems}}catch(x){throw console.error("Error fetching customers:",x),x}},"getList"),getOne:o(async(t,s)=>{try{return{data:await f.collection("customers").getOne(s.id.toString())}}catch(r){throw console.error("Error fetching customer:",r),r}},"getOne"),create:o(async(t,s)=>{try{return{data:await f.collection("customers").create(s.data)}}catch(r){throw console.error("Error creating customer:",r),r}},"create"),update:o(async(t,s)=>{try{return{data:await f.collection("customers").update(s.id,s.data)}}catch(r){throw console.error("Error updating customer:",r),r}},"update"),delete:o(async(t,s)=>{try{return await f.collection("customers").delete(s.id.toString()),{data:{id:s.id}}}catch(r){throw console.error("Error deleting customer:",r),r}},"delete"),deleteMany:o(async(t,s)=>{try{return await Promise.all(s.ids.map(r=>f.collection("customers").delete(r.toString()))),{data:s.ids}}catch(r){throw console.error("Error deleting customers:",r),r}},"deleteMany"),getMany:o(async(t,s)=>{try{return{data:await Promise.all(s.ids.map(n=>f.collection("customers").getOne(n.toString())))}}catch(r){throw console.error("Error fetching customers:",r),r}},"getMany"),getManyReference:o(async(t,s)=>{const{page:r,perPage:n}=s.pagination||{page:1,perPage:10},{field:i,order:a}=s.sort||{field:"id",order:"ASC"},{target:l,id:u}=s;try{const x=`${l} = "${u}"`,h=await f.collection("customers").getList(r,n,{sort:a==="ASC"?`+${i}`:`-${i}`,filter:x});return{data:h.items,total:h.totalItems}}catch(x){throw console.error("Error fetching customers reference:",x),x}},"getManyReference")},Kt={getList:o(async(t,s)=>{const{pagination:r,sort:n,filter:i}=s,{page:a,perPage:l}=r,{field:u,order:x}=n;let h="";const g=[];i.q&&g.push(`(name ~ "${i.q}" || description ~ "${i.q}" || name_la ~ "${i.q}" || description_la ~ "${i.q}")`),i.category_id&&g.push(`category_id = "${i.category_id}"`),i.price_gte&&g.push(`price >= ${i.price_gte}`),i.price_lte&&g.push(`price <= ${i.price_lte}`);const A=[];i.stock_out&&A.push("stock = 0"),i.stock_low&&A.push("(stock >= 1 && stock <= 9)"),i.stock_medium&&A.push("(stock >= 10 && stock <= 49)"),i.stock_high&&A.push("stock >= 50"),A.length>0&&g.push(`(${A.join(" || ")})`);const j=[];i.sales_best&&j.push("sales_count > 100"),i.sales_average&&j.push("(sales_count >= 10 && sales_count <= 100)"),i.sales_low&&j.push("(sales_count >= 1 && sales_count < 10)"),i.sales_never&&j.push("sales_count = 0"),j.length>0&&g.push(`(${j.join(" || ")})`),g.length>0&&(h=g.join(" && "));const C=`${x==="DESC"?"-":""}${u}`;try{const m=await f.collection("products").getList(a,l,{filter:h,sort:C,expand:"category_id"});return{data:m.items,total:m.totalItems}}catch(m){throw console.error("Error fetching products:",m),new Error("Failed to fetch products")}},"getList"),getOne:o(async(t,s)=>{try{return{data:await ie("products",s.id)}}catch(r){throw console.error("Error fetching product:",r),new Error("Failed to fetch product")}},"getOne"),getMany:o(async(t,s)=>{try{const r=s.ids.map(i=>`id = "${i}"`).join(" || ");return{data:(await f.collection("products").getList(1,s.ids.length,{filter:r})).items}}catch(r){throw console.error("Error fetching products:",r),new Error("Failed to fetch products")}},"getMany"),getManyReference:o(async(t,s)=>{const{target:r,id:n,pagination:i,sort:a,filter:l}=s,{page:u,perPage:x}=i,{field:h,order:g}=a,A=[`${r} = "${n}"`];l.q&&A.push(`(name ~ "${l.q}" || description ~ "${l.q}")`);const j=A.join(" && "),C=`${g==="DESC"?"-":""}${h}`;try{const m=await f.collection("products").getList(u,x,{filter:j,sort:C});return{data:m.items,total:m.totalItems}}catch(m){throw console.error("Error fetching related products:",m),new Error("Failed to fetch related products")}},"getManyReference"),create:o(async(t,s)=>{try{const r=await Bs("products",s.data);return{data:await ie("products",r)}}catch(r){throw console.error("Error creating product:",r),new Error("Failed to create product")}},"create"),update:o(async(t,s)=>{const{id:r,data:n}=s;try{return await jt("products",r,n),{data:await ie("products",r)}}catch(i){throw console.error("Error updating product:",i),new Error("Failed to update product")}},"update"),updateMany:o(async(t,s)=>{const{ids:r,data:n}=s;try{return await Promise.all(r.map(i=>jt("products",i,n))),{data:r}}catch(i){throw console.error("Error updating products:",i),new Error("Failed to update products")}},"updateMany"),delete:o(async(t,s)=>{const{id:r}=s;try{const n=await ie("products",r);return await Ye("products",r),{data:n}}catch(n){throw console.error("Error deleting product:",n),new Error("Failed to delete product")}},"delete"),deleteMany:o(async(t,s)=>{const{ids:r}=s;try{return await Promise.all(r.map(n=>Ye("products",n))),{data:r}}catch(n){throw console.error("Error deleting products:",n),new Error("Failed to delete products")}},"deleteMany")},te="product_categories",Qt={getList:o(async(t,s)=>{const{page:r=1,perPage:n=25}=s.pagination||{},{field:i="created",order:a="DESC"}=s.sort||{},l=s.filter||{};try{const x=await f.collection(te).getList(r,n,{sort:`${a==="ASC"?"+":"-"}${i}`,filter:Object.keys(l||{}).map(h=>`${h} ~ "${l[h]}"`).join(" && ")});return{data:x.items,total:x.totalItems}}catch(u){throw console.error("Error fetching product categories:",u),u}},"getList"),getOne:o(async(t,s)=>{try{return{data:await ie(te,String(s.id))}}catch(r){throw console.error("Error fetching product category:",r),r}},"getOne"),getMany:o(async(t,s)=>{try{return{data:await Promise.all(s.ids.map(n=>ie(te,String(n))))}}catch(r){throw console.error("Error fetching multiple product categories:",r),r}},"getMany"),create:o(async(t,s)=>{try{const r=await Bs(te,s.data);return{data:await ie(te,r)}}catch(r){throw console.error("Error creating product category:",r),r}},"create"),update:o(async(t,s)=>{try{return await jt(te,String(s.id),s.data),{data:await ie(te,String(s.id))}}catch(r){throw console.error("Error updating product category:",r),r}},"update"),delete:o(async(t,s)=>{try{return await Ye(te,String(s.id)),{data:s.previousData}}catch(r){throw console.error("Error deleting product category:",r),r}},"delete"),deleteMany:o(async(t,s)=>{try{return await Promise.all(s.ids.map(r=>Ye(te,String(r)))),{data:s.ids}}catch(r){throw console.error("Error deleting multiple product categories:",r),r}},"deleteMany")},Jt={getList:o(async(t,s)=>{const{page:r,perPage:n}=s.pagination||{page:1,perPage:10},{field:i,order:a}=s.sort||{field:"id",order:"ASC"},{q:l,...u}=s.filter;try{let x="";const h=[];l&&h.push(`(full_name ~ "${l}" || email ~ "${l}" || username ~ "${l}")`),Object.entries(u).forEach(([A,j])=>{j!=null&&j!==""&&(typeof j=="boolean"?h.push(`${A} = ${j}`):typeof j=="string"?h.push(`${A} ~ "${j}"`):h.push(`${A} = ${j}`))}),h.length>0&&(x=h.join(" && "));const g=await f.collection("users").getList(r,n,{sort:a==="ASC"?`+${i}`:`-${i}`,filter:x||void 0});return{data:g.items,total:g.totalItems}}catch(x){throw console.error("Error fetching users:",x),x}},"getList"),getOne:o(async(t,s)=>{try{return{data:await f.collection("users").getOne(s.id.toString())}}catch(r){throw console.error("Error fetching user:",r),r}},"getOne"),create:o(async(t,s)=>{try{return{data:await f.collection("users").create(s.data)}}catch(r){throw console.error("Error creating user:",r),r}},"create"),update:o(async(t,s)=>{try{return{data:await f.collection("users").update(s.id,s.data)}}catch(r){throw console.error("Error updating user:",r),r}},"update"),delete:o(async(t,s)=>{try{return await f.collection("users").delete(s.id.toString()),{data:{id:s.id}}}catch(r){throw console.error("Error deleting user:",r),r}},"delete"),deleteMany:o(async(t,s)=>{try{return await Promise.all(s.ids.map(r=>f.collection("users").delete(r.toString()))),{data:s.ids}}catch(r){throw console.error("Error deleting users:",r),r}},"deleteMany"),getMany:o(async(t,s)=>{try{return{data:await Promise.all(s.ids.map(n=>f.collection("users").getOne(n.toString())))}}catch(r){throw console.error("Error fetching users:",r),r}},"getMany"),getManyReference:o(async(t,s)=>{const{page:r,perPage:n}=s.pagination||{page:1,perPage:10},{field:i,order:a}=s.sort||{field:"id",order:"ASC"},{target:l,id:u}=s;try{const x=`${l} = "${u}"`,h=await f.collection("users").getList(r,n,{sort:a==="ASC"?`+${i}`:`-${i}`,filter:x});return{data:h.items,total:h.totalItems}}catch(x){throw console.error("Error fetching users reference:",x),x}},"getManyReference")},Cn=o(t=>{const s=Sn();return new Proxy(_n,{get(n,i){return i==="supportAbortSignal"?!0:(a,l)=>a==="orders"&&qt[i.toString()]?qt[i.toString()](a,l):a==="blogs"&&Yt[i.toString()]?Yt[i.toString()](a,l):a==="customers"&&Gt[i.toString()]?Gt[i.toString()](a,l):a==="products"&&Kt[i.toString()]?Kt[i.toString()](a,l):(a==="product_categories"||a==="categories")&&Qt[i.toString()]?Qt[i.toString()](a,l):a==="users"&&Jt[i.toString()]?Jt[i.toString()](a,l):s.then(u=>u[i.toString()](a,l))}})},"dataProviderFactory"),Sn=o(async t=>Te(()=>import("./rest-Cg6_tm34.js"),__vite__mapDeps([4,0,1,2,3]),import.meta.url).then(s=>s.default),"getDataProvider"),_n={create:o(()=>Promise.resolve({data:{id:0}}),"create"),delete:o(()=>Promise.resolve({data:{}}),"delete"),deleteMany:o(()=>Promise.resolve({}),"deleteMany"),getList:o(()=>Promise.resolve({data:[],total:0}),"getList"),getMany:o(()=>Promise.resolve({data:[]}),"getMany"),getManyReference:o(()=>Promise.resolve({data:[],total:0}),"getManyReference"),getOne:o(()=>Promise.resolve({data:{}}),"getOne"),update:o(()=>Promise.resolve({data:{}}),"update"),updateMany:o(()=>Promise.resolve({}),"updateMany")},kn={...br,pos:{search:"Search",configuration:"Configuration",language:"Language",theme:{name:"Theme",light:"Light",dark:"Dark"},dashboard:{monthly_revenue:"Monthly Revenue",month_history:"30 Day Revenue History",new_orders:"New Orders",pending_reviews:"Pending Reviews",all_reviews:"See all reviews",new_customers:"New Customers",all_customers:"See all customers",pending_orders:"Pending Orders",order:{items:"by %{customer_name}, one item |||| by %{customer_name}, %{nb_items} items"},welcome:{title:"Welcome to the react-admin e-commerce demo",subtitle:"This is the admin of an imaginary poster shop. Feel free to explore and modify the data - it's local to your computer, and will reset each time you reload.",ra_button:"react-admin site",demo_button:"Source for this demo"}},menu:{sales:"Sales",catalog:"Catalog",customers:"Customers"},events:{review:{title:'Posted review on "%{product}"'},order:{title:"Ordered 1 poster |||| Ordered %{smart_count} posters"}}},resources:{customers:{name:"Customer |||| Customers",fields:{orders:"Orders",first_seen:"First seen",full_name:"Name",groups:"Segments",last_seen:"Last seen",last_seen_gte:"Visited Since",name:"Name",total_spent:"Total spent",password:"Password",confirm_password:"Confirm password",stateAbbr:"State"},filters:{last_visited:"Last visited",today:"Today",this_week:"This week",last_week:"Last week",this_month:"This month",last_month:"Last month",earlier:"Earlier",has_ordered:"Has ordered",has_newsletter:"Has newsletter",group:"Segment"},fieldGroups:{identity:"Identity",address:"Address",stats:"Stats",history:"History",password:"Password",change_password:"Change Password"},page:{delete:"Delete Customer"},errors:{password_mismatch:"The password confirmation is not the same as the password."},notifications:{created:"Customer created |||| %{smart_count} customers created",updated:"Customer updated |||| %{smart_count} customers updated",deleted:"Customer deleted |||| %{smart_count} customers deleted"}},orders:{name:"Order |||| Orders",amount:"1 order |||| %{smart_count} orders",title:"Order %{reference}",fields:{basket:{delivery:"Delivery",reference:"Reference",quantity:"Quantity",sum:"Sum",tax_rate:"Tax Rate",taxes:"Tax",total:"Total",unit_price:"Unit Price"},address:"Address",customer_id:"Customer",date_gte:"Passed Since",date_lte:"Passed Before",nb_items:"Nb Items",total_gte:"Min amount",status:"Status",returned:"Returned"},section:{order:"Order",customer:"Customer",shipping_address:"Shipping Address",items:"Items",total:"Totals"},notifications:{created:"Order created |||| %{smart_count} orders created",updated:"Order updated |||| %{smart_count} orders updated",deleted:"Order deleted |||| %{smart_count} orders deleted"}},blogs:{name:"Blog |||| Blogs"},users:{name:"User admin |||| User admin",fields:{full_name:"Full Name",username:"Username",email:"Email",phone_number:"Phone Number",verified:"Verified",emailVisibility:"Email Visibility",password:"Password",passwordConfirm:"Confirm Password"}},invoices:{name:"Invoice |||| Invoices",fields:{date:"Invoice date",customer_id:"Customer",order_id:"Order",date_gte:"Passed Since",date_lte:"Passed Before",total_gte:"Min amount",address:"Address"},notifications:{created:"Invoice created |||| %{smart_count} invoices created",updated:"Invoice updated |||| %{smart_count} invoices updated",deleted:"Invoice deleted |||| %{smart_count} invoices deleted"}},products:{name:"Products |||| Products",fields:{category_id:"Category",height_gte:"Min height",height_lte:"Max height",height:"Height",image:"Image",price:"Price",reference:"Reference",sales:"Sales",stock_lte:"Low Stock",stock:"Stock",thumbnail:"Thumbnail",width_gte:"Min width",width_lte:"Max width",width:"Width"},tabs:{image:"Image",details:"Details",description:"Description",reviews:"Reviews"},filters:{categories:"Categories",stock:"Stock",no_stock:"Out of stock",low_stock:"1 - 9 items",average_stock:"10 - 49 items",enough_stock:"50 items & more",sales:"Sales",best_sellers:"Best sellers",average_sellers:"Average",low_sellers:"Low",never_sold:"Never sold"},notifications:{created:"Poster created |||| %{smart_count} posters created",updated:"Poster updated |||| %{smart_count} posters updated",deleted:"Poster deleted |||| %{smart_count} posters deleted"}},categories:{name:"Category |||| Categories",fields:{products:"Products"},notifications:{created:"Category created |||| %{smart_count} categories created",updated:"Category updated |||| %{smart_count} categories updated",deleted:"Category deleted |||| %{smart_count} categories deleted"}},reviews:{name:"Review |||| Reviews",amount:"1 review |||| %{smart_count} reviews",relative_to_poster:"Review on poster",detail:"Review detail",fields:{customer_id:"Customer",order_id:"Order",product_id:"Product",date_gte:"Posted since",date_lte:"Posted before",date:"Date",comment:"Comment",rating:"Rating"},action:{accept:"Accept",reject:"Reject"},notifications:{created:"Review created |||| %{smart_count} reviews created",updated:"Review updated |||| %{smart_count} reviews updated",deleted:"Review deleted |||| %{smart_count} reviews deleted",approved_success:"Review approved",approved_error:"Error: Review not approved",rejected_success:"Review rejected",rejected_error:"Error: Review not rejected"}},segments:{name:"Segment |||| Segments",fields:{customers:"Customers",name:"Name"},data:{compulsive:"Compulsive",collector:"Collector",ordered_once:"Ordered once",regular:"Regular",returns:"Returns",reviewer:"Reviewer"}}}},Ws=o(({size:t="25",sx:s})=>{const r=P();return r?e.jsx(Et,{src:`${r.avatar}?size=${t}x${t}`,style:{width:parseInt(t,10),height:parseInt(t,10)},sx:s,alt:`${r.first_name} ${r.last_name}`}):null},"AvatarField$1"),Tn=o(t=>{const{size:s}=t,r=P();return r?e.jsxs(c,{variant:"body2",component:"div",sx:[{display:"flex",flexWrap:"nowrap",alignItems:"center"},...Array.isArray(t.sx)?t.sx:[t.sx]],children:[e.jsx(Ws,{record:r,size:s,sx:{mr:1,mt:-.5,mb:-.5,textDecoration:"underline",textDecorationColor:"#bdbdbd"}}),r.first_name," ",r.last_name]}):null},"FullNameField"),$s=p.memo(Tn),Dn=o(()=>{const t=P();return t?e.jsxs("span",{children:[t.address,", ",t.city,", ",t.stateAbbr," ",t.zipcode]}):null},"AddressField"),J=kt(b)({textAlign:"right"}),Os=o(()=>{const t=P(),s=U(),r=t?t.basket.map(l=>l.product_id):[],{isPending:n,data:i}=Ar("products",{ids:r},{enabled:!!t}),a=i?i.reduce((l,u)=>(l[u.id]=u,l),{}):{};return n||!t||!i?null:e.jsxs(_e,{children:[e.jsx(Me,{children:e.jsxs(M,{children:[e.jsx(b,{children:s("resources.orders.fields.basket.reference")}),e.jsx(J,{children:s("resources.orders.fields.basket.unit_price")}),e.jsx(J,{children:s("resources.orders.fields.basket.quantity")}),e.jsx(J,{children:s("resources.orders.fields.basket.total")})]})}),e.jsx(ke,{children:t.basket.map(l=>e.jsxs(M,{children:[e.jsx(b,{children:e.jsx(Je,{to:`/products/${l.product_id}`,children:a[l.product_id].reference})}),e.jsx(J,{children:a[l.product_id].price.toLocaleString(void 0,{style:"currency",currency:"USD"})}),e.jsx(J,{children:l.quantity}),e.jsx(J,{children:(a[l.product_id].price*l.quantity).toLocaleString(void 0,{style:"currency",currency:"USD"})})]},l.product_id))})]})},"Basket"),En=o(()=>{const t=P();return t?e.jsx(k,{sx:{width:600,margin:"auto"},children:e.jsxs(D,{children:[e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{size:{xs:6},children:e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Posters Galore"})}),e.jsx(y,{size:{xs:6},children:e.jsxs(c,{variant:"h6",gutterBottom:!0,align:"right",children:["Invoice ",t.id]})})]}),e.jsx(y,{container:!0,spacing:2,children:e.jsx(y,{size:{xs:12},sx:{alignContent:"flex-end"},children:e.jsx(z,{reference:"customers",source:"customer_id",link:!1,children:e.jsx(In,{})})})}),e.jsx(d,{sx:{height:20},children:" "}),e.jsxs(y,{container:!0,spacing:2,children:[e.jsxs(y,{size:{xs:6},children:[e.jsxs(c,{variant:"h6",gutterBottom:!0,align:"center",children:["Date"," "]}),e.jsx(c,{gutterBottom:!0,align:"center",children:new Date(t.date).toLocaleDateString()})]}),e.jsxs(y,{size:{xs:5},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,align:"center",children:"Order"}),e.jsx(z,{reference:"orders",source:"order_id",link:!1,children:e.jsx(w,{source:"reference",align:"center",component:"p",gutterBottom:!0})})]})]}),e.jsx(d,{sx:{margin:"10px 0"},children:e.jsx(z,{reference:"orders",source:"order_id",link:!1,children:e.jsx(Os,{})})})]})}):null},"InvoiceShow"),In=o(()=>{const t=P();return t?e.jsxs(c,{children:[t.first_name," ",t.last_name,e.jsx("br",{}),t.address,e.jsx("br",{}),t.city,", ",t.zipcode]}):null},"CustomerField"),Pn=[e.jsx(Pe,{source:"date_gte",alwaysOn:!0}),e.jsx(Pe,{source:"date_lte",alwaysOn:!0}),e.jsx(le,{source:"customer_id",reference:"customers"}),e.jsx(le,{source:"order_id",reference:"orders"})],Ln=o(()=>e.jsxs(Y,{children:[e.jsx(Be,{}),e.jsx(Ze,{}),e.jsx(Fe,{})]}),"ListActions"),Bn=o(()=>{const t=$(),{defaultTitle:s}=V();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"InvoicesTitle"),Ee=B.Col,Oe=B.NumberCol,Fn=o(()=>e.jsx(de,{filters:Pn,perPage:25,sort:{field:"date",order:"DESC"},actions:e.jsx(Ln,{}),title:e.jsx(Bn,{}),children:e.jsxs(B,{rowClick:"expand",expand:e.jsx(En,{}),sx:{"& .onlyLarge":{display:{xs:"none",lg:"table-cell"}}},children:[e.jsx(Ee,{source:"id"}),e.jsx(Ee,{field:T,source:"date"}),e.jsx(Ee,{source:"customer_id",className:"onlyLarge",children:e.jsx(z,{source:"customer_id",reference:"customers",children:e.jsx($s,{source:"last_name"})})}),e.jsx(Ee,{source:"address",disableSort:!0,label:"resources.invoices.fields.address",children:e.jsx(z,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(Dn,{})})}),e.jsx(Ee,{source:"order_id",children:e.jsx(z,{source:"order_id",reference:"orders"})}),e.jsx(Oe,{source:"total_ex_taxes",className:"onlyLarge"}),e.jsx(Oe,{source:"delivery_fees",className:"onlyLarge"}),e.jsx(Oe,{source:"taxes",className:"onlyLarge"}),e.jsx(Oe,{source:"total"})]})}),"InvoiceList"),Rn={list:Fn,icon:bo},Mn=o(({color:t})=>e.jsx(So,{sx:{color:t,marginLeft:-9.5}}),"CustomArrowDropDownIcon"),Wn=o(({color:t})=>e.jsx(Co,{sx:{color:t,marginLeft:-9.5}}),"CustomArrowDropUpIcon"),$n=o(({showLabel:t=!1,size:s="small",variant:r="outlined",minWidth:n=80})=>{const{currencies:i}=Rs(),{currency:a,setCurrency:l}=Ft(),[u,x]=ze.useState(!1),h=o(j=>{l(j.target.value)},"handleCurrencyChange"),g=ze.useMemo(()=>i==null?void 0:i.filter(j=>j.type==="SELL"),[i]),A=ze.useMemo(()=>()=>u?e.jsx(Wn,{color:"#000"}):e.jsx(Mn,{color:"#000"}),[u]);return e.jsxs(d,{display:"flex",alignItems:"center",sx:{mt:-.4},children:[t&&e.jsx(c,{variant:"body2",sx:{mr:0,color:"#7A6A55"},children:"Currency:"}),e.jsx(Ao,{size:s,sx:{minWidth:n},children:e.jsx(wo,{open:u,onOpen:o(()=>x(!0),"onOpen"),onClose:o(()=>x(!1),"onClose"),IconComponent:A,value:a,onChange:h,variant:r,sx:{cursor:"pointer","& .MuiSelect-select":{py:s==="small"?.5:1,px:s==="small"?-2:2,color:"#000"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"transparent"}},children:g==null?void 0:g.map(j=>e.jsx(vo,{value:j.ccy,children:e.jsx(d,{display:"flex",alignItems:"center",gap:1,children:e.jsx(c,{children:j.ccy})})},j.id))})})]})},"CurrencySelector"),On=o(()=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx($n,{}),e.jsx(wr,{}),e.jsx(vr,{})]}),"AppBarToolbar"),zn=o(()=>{const t=R(s=>s.breakpoints.up("sm"));return e.jsxs(Cr,{color:"secondary",toolbar:e.jsx(On,{}),children:[e.jsx(Sr,{}),t&&e.jsx(d,{component:"span",sx:{flex:1}})]})},"CustomAppBar"),Un=p.lazy(()=>Te(()=>import("./vendor-B8RineCB.js").then(t=>t.bz),__vite__mapDeps([0,1,2,3]),import.meta.url).then(t=>({default:t.RichTextInput}))),Nn=o(()=>e.jsx(Ce,{children:e.jsxs(N,{children:[e.jsx(v,{source:"title",validate:[S()],fullWidth:!0}),e.jsx(Un,{source:"description",validate:[S()],fullWidth:!0}),e.jsx(v,{source:"image_url",fullWidth:!0})]})}),"BlogCreate"),Vn=p.lazy(()=>Te(()=>import("./vendor-B8RineCB.js").then(t=>t.bz),__vite__mapDeps([0,1,2,3]),import.meta.url).then(t=>({default:t.RichTextInput}))),Hn=o(()=>e.jsxs(Y,{children:[e.jsx(_r,{}),e.jsx(ce,{})]}),"BlogEditActions"),qn=o(()=>e.jsx(me,{actions:e.jsx(Hn,{}),children:e.jsxs(N,{children:[e.jsx(w,{source:"id"}),e.jsx(v,{source:"title",validate:[S()],fullWidth:!0}),e.jsx(Vn,{source:"description",validate:[S()],fullWidth:!0}),e.jsx(v,{source:"image_url",fullWidth:!0}),e.jsx(Ke,{source:"count"})]})}),"BlogEdit"),Yn=o(()=>{const t=P();if(!(t!=null&&t.description))return null;const r=o(i=>{const a=document.createElement("DIV");return a.innerHTML=i,a.textContent||a.innerText||""},"stripHtml")(t.description),n=r.length>100?r.substring(0,100)+"...":r;return e.jsx(c,{variant:"body2",sx:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n})},"DescriptionField"),Gn=[e.jsx(ae,{source:"q",alwaysOn:!0}),e.jsx(v,{source:"title"}),e.jsx(v,{source:"description"}),e.jsx(Ke,{source:"count"})],Kn=o(()=>e.jsxs(Y,{children:[e.jsx(Be,{}),e.jsx(we,{}),e.jsx(Fe,{})]}),"BlogListActions"),Qn=o(()=>e.jsx(ds,{}),"BlogBulkActions"),Jn=o(()=>e.jsx(de,{filters:Gn,actions:e.jsx(Kn,{}),sort:{field:"created",order:"DESC"},perPage:25,children:e.jsxs(ls,{bulkActionButtons:e.jsx(Qn,{}),rowClick:"edit",children:[e.jsx(w,{source:"id"}),e.jsx(w,{source:"title"}),e.jsx(Yn,{}),e.jsx(cs,{source:"image_url"}),e.jsx(yt,{source:"count"}),e.jsx(T,{source:"created"}),e.jsx(T,{source:"updated"}),e.jsx(ue,{}),e.jsx(ce,{})]})}),"BlogList"),Zn=o(()=>e.jsxs(Y,{children:[e.jsx(ue,{}),e.jsx(ce,{})]}),"BlogShowActions"),Xn=o(()=>e.jsx(Qe,{actions:e.jsx(Zn,{}),children:e.jsxs(bt,{children:[e.jsx(w,{source:"id"}),e.jsx(w,{source:"title"}),e.jsx(kr,{source:"description"}),e.jsx(w,{source:"title"}),e.jsx(w,{source:"description"}),e.jsx(cs,{source:"image_url"}),e.jsx(T,{source:"created"}),e.jsx(T,{source:"updated"})]})}),"BlogShow"),zs={list:Jn,create:Nn,edit:qn,show:Xn,icon:_o},ei=[e.jsx(ae,{source:"q",alwaysOn:!0},"q"),e.jsx(se,{source:"verified",choices:[{id:"",name:"All Status"},{id:!0,name:"Verified"},{id:!1,name:"Unverified"}],label:"Status",emptyText:"All Status"},"verified"),e.jsx(se,{source:"has_ordered",choices:[{id:"",name:"All Customers"},{id:!0,name:"Has Orders"},{id:!1,name:"No Orders"}],label:"Order Status",emptyText:"All Customers"},"has_ordered"),e.jsx(se,{source:"emailVisibility",choices:[{id:"",name:"All Email Visibility"},{id:!0,name:"Email Visible"},{id:!1,name:"Email Hidden"}],label:"Email Visibility",emptyText:"All Email Visibility"},"emailVisibility"),e.jsx(ae,{source:"email",label:"Search by Email",placeholder:"Enter email address"},"email")],ti=o(()=>{const t=gt(),s=W(),r=o(async()=>{try{const{data:n}=await t.getList("customers",{pagination:{page:1,perPage:1e3},sort:{field:"created",order:"DESC"},filter:{}}),i=n.map(u=>({Name:u.name,Username:u.username,Email:u.email,Phone:u.phone_number,Verified:u.verified?"Yes":"No",Created:new Date(u.created).toLocaleDateString(),Updated:new Date(u.updated).toLocaleDateString()})),a=be.json_to_sheet(i),l=be.book_new();be.book_append_sheet(l,a,"Customers"),us(l,`customers_export_${new Date().toISOString().split("T")[0]}.xlsx`),s("Excel file exported successfully",{type:"success"})}catch{s("Failed to export Excel file",{type:"error"})}},"handleExportExcel");return e.jsxs(Y,{children:[e.jsx(pe,{onClick:r,startIcon:e.jsx(ks,{}),variant:"outlined",size:"small",children:"Export Excel"}),e.jsx(we,{}),e.jsx(Ze,{})]})},"CustomerListActions"),si=o(()=>{const t=$(),{defaultTitle:s}=V();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"CustomerTitle$2"),oe=B.Col,ri=o(({record:t})=>t!=null&&t.avatar?e.jsx(Et,{src:`https://sensornode.shop/api/files/_pb_users_auth_/${t.id}/${t.avatar}`,alt:t.name,sx:{width:32,height:32}}):null,"AvatarField"),oi=o(({record:t})=>{const[s]=Re(),r=W(),n=wt(),i=o(async a=>{if(a.stopPropagation(),!t)return;const l=a.target.checked;try{await s("customers",{id:t.id,data:{...t,verified:l},previousData:t}),r(`Customer ${l?"verified":"unverified"} successfully`,{type:"success"}),n()}catch{r("Error updating verification status",{type:"error"})}},"handleVerifiedChange");return e.jsx(It,{checked:(t==null?void 0:t.verified)||!1,onChange:i,size:"small",color:"success"})},"VerifiedField$1"),ni=o(()=>(R(t=>t.breakpoints.down("sm")),R(t=>t.breakpoints.down("md")),e.jsx(de,{filters:ei,sort:{field:"created",order:"DESC"},perPage:25,actions:e.jsx(ti,{}),title:e.jsx(si,{}),children:e.jsxs(B,{rowClick:"edit",sx:{"& .column-avatar":{width:"48px"},"& .column-phone_number":{md:{display:"none"},lg:{display:"table-cell"}}},children:[e.jsx(oe,{source:"avatar",field:ri}),e.jsx(oe,{source:"name",label:"Name"}),e.jsx(oe,{source:"username",label:"Username"}),e.jsx(oe,{source:"email",field:At}),e.jsx(oe,{source:"phone_number",label:"Phone"}),e.jsx(oe,{source:"verified",field:oi}),e.jsx(oe,{source:"created",field:T,label:"Created"}),e.jsx(oe,{source:"updated",field:T,label:"Updated"})]})})),"CustomerList"),Us=o(t=>{const s={};if(t.name||(s.name="ra.validation.required"),t.username||(s.username="ra.validation.required"),!t.email)s.email="ra.validation.required";else{const r=vt()(t.email);r&&(s.email=r)}return s},"validateForm"),ii=o(()=>{const t=$(),{defaultTitle:s}=ft();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"CustomerTitle$1"),ai=o(()=>e.jsx(Ce,{title:e.jsx(ii,{}),children:e.jsxs(N,{sx:{maxWidth:600},defaultValues:{verified:!1,emailVisibility:!0},validate:Us,children:[e.jsx(ut,{label:"Customer Information"}),e.jsxs(d,{sx:{display:{xs:"block",sm:"flex",width:"100%"},gap:2},children:[e.jsx(d,{sx:{flex:1},children:e.jsx(v,{source:"name",isRequired:!0,fullWidth:!0})}),e.jsx(d,{sx:{flex:1},children:e.jsx(v,{source:"username",isRequired:!0,fullWidth:!0})})]}),e.jsx(v,{type:"email",source:"email",isRequired:!0,fullWidth:!0}),e.jsx(v,{source:"phone_number",fullWidth:!0}),e.jsx(Zt,{}),e.jsx(ut,{label:"Profile Settings"}),e.jsx(xs,{source:"avatar",accept:{},maxSize:5e6,children:e.jsx(Xe,{source:"src",title:"title"})}),e.jsxs(d,{sx:{display:{xs:"block",sm:"flex"},gap:2},children:[e.jsx(re,{source:"verified"}),e.jsx(re,{source:"emailVisibility"})]}),e.jsx(Zt,{}),e.jsx(ut,{label:"Address"}),e.jsx(v,{source:"address_id",fullWidth:!0,helperText:"Link to address record"})]})}),"CustomerCreate"),ut=o(({label:t})=>e.jsx(c,{variant:"h6",gutterBottom:!0,children:t}),"SectionTitle"),Zt=o(()=>e.jsx(d,{sx:{pt:"1em"}}),"Separator"),li=o(()=>(U(),e.jsx(me,{title:e.jsx(di,{}),aside:e.jsx(ci,{}),children:e.jsx(N,{validate:Us,children:e.jsxs(d,{sx:{display:"flex",gap:3,flexDirection:{xs:"column",md:"row"}},children:[e.jsxs(d,{sx:{flex:2},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Customer Information"}),e.jsxs(d,{sx:{display:{xs:"block",sm:"flex"},gap:2},children:[e.jsx(d,{sx:{flex:1},children:e.jsx(v,{source:"name",isRequired:!0,fullWidth:!0})}),e.jsx(d,{sx:{flex:1},children:e.jsx(v,{source:"username",isRequired:!0,fullWidth:!0})})]}),e.jsx(v,{type:"email",source:"email",isRequired:!0,fullWidth:!0}),e.jsx(v,{source:"phone_number",fullWidth:!0}),e.jsx(d,{sx:{mt:2}}),e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Profile Settings"}),e.jsx(xs,{source:"avatar",accept:{},maxSize:5e6,children:e.jsx(Xe,{source:"src",title:"title"})}),e.jsxs(d,{sx:{display:{xs:"block",sm:"flex"},gap:2},children:[e.jsx(re,{source:"verified"}),e.jsx(re,{source:"emailVisibility"})]}),e.jsx(d,{sx:{mt:2}}),e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Address"}),e.jsx(v,{source:"address_id",fullWidth:!0,helperText:"Link to address record"})]}),e.jsxs(d,{sx:{flex:1},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Customer Stats"}),e.jsx(k,{children:e.jsxs(D,{children:[e.jsxs(c,{variant:"body2",color:"textSecondary",children:["Created: ",e.jsx(T,{source:"created",showTime:!0})]}),e.jsxs(c,{variant:"body2",color:"textSecondary",children:["Updated: ",e.jsx(T,{source:"updated",showTime:!0})]})]})})]})]})})})),"CustomerEdit"),ci=o(()=>e.jsx(d,{sx:{width:300,p:2},children:e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Profile Preview"}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsx(Et,{sx:{width:64,height:64},children:e.jsx(w,{source:"name"})}),e.jsxs(d,{children:[e.jsx(c,{variant:"h6",children:e.jsx(w,{source:"name"})}),e.jsxs(c,{variant:"body2",color:"textSecondary",children:["@",e.jsx(w,{source:"username"})]})]})]}),e.jsxs(c,{variant:"body2",children:["Email: ",e.jsx(w,{source:"email"})]}),e.jsxs(c,{variant:"body2",children:["Phone: ",e.jsx(w,{source:"phone_number"})]})]})})}),"CustomerAside"),di=o(()=>{const t=$(),{defaultTitle:s}=ve();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsxs(c,{variant:"h5",children:["Edit Customer: ",e.jsx(w,{source:"name"})]})]})},"CustomerTitle"),Ns={list:ni,create:ai,edit:li,icon:Pt},Rt=o(t=>e.jsx(z,{source:"customer_id",reference:"customers",...t,children:e.jsx($s,{source:"last_name"})}),"CustomerReferenceField"),ui=o(()=>{const{data:t,error:s,isPending:r}=V(),n=U();return r||s||t.length===0?null:e.jsx(d,{sx:{margin:"0.5em"},children:t.map(i=>e.jsx(Ge,{value:i,children:e.jsxs(k,{sx:{margin:"0.5rem 0"},children:[e.jsx(qe,{title:e.jsxs(e.Fragment,{children:[n("resources.orders.name",1)," #",e.jsx(w,{source:"reference",variant:"body1"})]}),titleTypographyProps:{variant:"body1"},action:e.jsx(ue,{})}),e.jsxs(D,{sx:{pt:0},children:[e.jsx(Rt,{source:"customer_id",sx:{display:"block",mb:1}}),e.jsxs(c,{variant:"body2",gutterBottom:!0,children:[n("resources.reviews.fields.date"),": ",e.jsx(T,{source:"date",showTime:!0})]}),e.jsxs(c,{variant:"body2",gutterBottom:!0,children:[n("resources.orders.fields.basket.total"),": ",e.jsx(yt,{source:"total",options:{style:"currency",currency:"USD"}})]}),e.jsxs(c,{variant:"body2",gutterBottom:!0,children:[n("resources.orders.fields.status"),": ",e.jsx(w,{source:"status"})]}),e.jsxs(c,{variant:"body2",children:[n("resources.orders.fields.returned"),": ",e.jsx(mt,{source:"returned"})]})]})]})},i.id))})},"MobileGrid"),Vs=p.createContext({currency:"USD",setCurrency:o(()=>{},"setCurrency")}),xi=o(()=>p.useContext(Vs),"useCurrency"),hi=o(()=>{const[t,s]=p.useState("USD");return e.jsx(Vs.Provider,{value:{currency:t,setCurrency:s},children:e.jsxs(d,{sx:{p:2},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(c,{variant:"h4",component:"h1",children:"Orders Management"}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(c,{variant:"body2",children:"Currency:"}),e.jsxs(Po,{value:t,exclusive:!0,onChange:o((r,n)=>{n!==null&&s(n)},"onChange"),size:"small",children:[e.jsx(rt,{value:"USD",children:"USD"}),e.jsx(rt,{value:"LAK",children:"LAK"}),e.jsx(rt,{value:"THB",children:"THB"})]})]})]}),e.jsx(mi,{})]})})},"OrderList"),Xt=[{id:"pending",name:"pending"},{id:"delivered",name:"delivered"},{id:"cancelled",name:"cancelled"}],mi=o(()=>{const[t,s]=p.useState("pending"),[r,n]=p.useState({}),i=R(l=>l.breakpoints.down("sm"));p.useEffect(()=>{o(async()=>{try{const u={};for(const x of Xt){const h=await f.collection("orders").getList(1,1,{filter:`status = "${x.id}"`});u[x.id]=h.totalItems}n(u)}catch(u){console.error("Error fetching order counts:",u)}},"fetchOrderCounts")()},[]);const a=p.useCallback((l,u)=>{s(u)},[]);return e.jsxs(p.Fragment,{children:[e.jsx(Lo,{variant:"fullWidth",centered:!0,value:t,indicatorColor:"primary",onChange:a,children:Xt.map(l=>e.jsx(Bo,{label:e.jsxs("span",{children:[l.name," (",r[l.id]||0,")"]}),value:l.id},l.id))}),e.jsx(He,{}),i?e.jsx(ui,{}):e.jsx(ji,{status:t})]})},"TabbedDatagrid");B.Col;B.NumberCol;const pi=o(({order:t})=>{const[s,r]=p.useState(!1),[n,i]=p.useState([]),[a,l]=p.useState(null),[u,x]=p.useState(null),[h,g]=p.useState({}),[A,j]=p.useState(!1),[C,m]=p.useState(null),{currency:_}=xi(),F=o(async()=>{if(!(!s||n.length>0)){j(!0),m(null);try{const E=await f.collection("order_items").getList(1,50,{filter:`order_id = "${t.id}"`});if(i(E.items),t.customer_id)try{const L=await f.collection("customers").getOne(t.customer_id);l(L)}catch(L){console.warn("Failed to fetch customer:",L)}if(t.address_id)try{const L=await f.collection("addresses").getOne(t.address_id);x(L)}catch(L){console.warn("Failed to fetch address:",L)}const O=E.items.map(L=>L.product_id),$e=Array.from(new Set(O)).map(async L=>{try{const st=await f.collection("products").getOne(L);return{id:L,data:st}}catch(st){return console.warn(`Failed to fetch product ${L}:`,st),null}}),tt=await Promise.all($e),Mt={};tt.forEach(L=>{L&&(Mt[L.id]=L.data)}),g(Mt)}catch(E){console.error("Error fetching order details:",E),m("Failed to load order details")}finally{j(!1)}}},"fetchOrderDetails");p.useEffect(()=>{F()},[s,t.id]);const I=o(()=>n.reduce((E,O)=>({lak:E.lak+O.quantity*O.price_lak,usd:E.usd+O.quantity*O.price_usd,thb:E.thb+O.quantity*O.price_thb}),{lak:0,usd:0,thb:0}),"calculateTotals")(),H=o((E,O)=>{switch(O){case"LAK":return`₭${E.toLocaleString()}`;case"USD":return`$${E.toFixed(2)}`;case"THB":return`฿${E.toFixed(2)}`;default:return E.toString()}},"formatCurrency"),We=o(()=>{switch(_){case"LAK":return H(I.lak,"LAK");case"USD":return H(I.usd,"USD");case"THB":return H(I.thb,"THB");default:return H(I.usd,"USD")}},"getCurrentTotal");return e.jsxs(e.Fragment,{children:[e.jsxs(M,{children:[e.jsx(b,{children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Le,{onClick:o(()=>r(!s),"onClick"),size:"small",children:s?e.jsx(ko,{}):e.jsx(To,{})}),e.jsx(T,{source:"created",record:t,showTime:!0})]})}),e.jsx(b,{children:t.reference_id}),e.jsx(b,{children:t.customer_name}),e.jsx(b,{children:t.phone_number}),e.jsx(b,{children:t.address}),e.jsx(b,{children:e.jsx(St,{label:t.status,color:t.status==="pending"?"warning":t.status==="delivered"?"success":"error",size:"small"})}),e.jsx(b,{children:We()})]}),e.jsx(M,{children:e.jsx(b,{colSpan:7,sx:{paddingBottom:0,paddingTop:0},children:e.jsx(Ss,{in:s,timeout:"auto",unmountOnExit:!0,children:e.jsxs(d,{sx:{margin:2},children:[A&&e.jsx(hs,{}),C&&e.jsx(Dt,{severity:"error",children:C}),!A&&!C&&e.jsxs(d,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:3},children:[e.jsx(d,{sx:{flex:{md:"0 0 33%"}},children:e.jsx(k,{children:e.jsxs(D,{children:[e.jsxs(c,{variant:"h6",gutterBottom:!0,children:[e.jsx(Do,{sx:{mr:1,verticalAlign:"middle"}}),"Order Information"]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Reference:"})," ",t.reference_id]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Created:"})," ",new Date(t.created).toLocaleString()]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Status:"})," ",t.status]}),t.remark&&e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Remark:"})," ",t.remark]}),a&&e.jsxs(d,{sx:{mt:2},children:[e.jsxs(c,{variant:"subtitle2",gutterBottom:!0,children:[e.jsx(Eo,{sx:{mr:1,verticalAlign:"middle"}}),"Customer Details"]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Name:"})," ",a.name||a.username]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Email:"})," ",a.email]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Phone:"})," ",a.phone_number]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Verified:"})," ",a.verified?"Yes":"No"]})]}),u&&e.jsxs(d,{sx:{mt:2},children:[e.jsxs(c,{variant:"subtitle2",gutterBottom:!0,children:[e.jsx(Io,{sx:{mr:1,verticalAlign:"middle"}}),"Shipping Address"]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Name:"})," ",u.shipping_name]}),e.jsxs(c,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Village:"})," ",u.village]})]})]})})}),e.jsx(d,{sx:{flex:{md:"0 0 42%"}},children:e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Order Items"}),n.length>0?e.jsx(Tt,{children:e.jsxs(_e,{size:"small",children:[e.jsx(Me,{children:e.jsxs(M,{children:[e.jsx(b,{children:"Product"}),e.jsx(b,{align:"right",children:"Qty"}),e.jsx(b,{align:"right",children:"Price"}),e.jsx(b,{align:"right",children:"Total"})]})}),e.jsx(ke,{children:n.map(E=>{const O=h[E.product_id],$e=o(()=>{switch(_){case"LAK":return E.price_lak;case"USD":return E.price_usd;case"THB":return E.price_thb;default:return E.price_usd}},"getPrice")(),tt=$e*E.quantity;return e.jsxs(M,{children:[e.jsx(b,{children:(O==null?void 0:O.name)||E.product_name}),e.jsx(b,{align:"right",children:E.quantity}),e.jsx(b,{align:"right",children:H($e,_)}),e.jsx(b,{align:"right",children:H(tt,_)})]},E.id)})})]})}):e.jsx(c,{variant:"body2",color:"text.secondary",children:"No items found"})]})})}),e.jsx(d,{sx:{flex:{md:"0 0 25%"}},children:e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Order Totals"}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{variant:"body2",children:"LAK:"}),e.jsx(c,{variant:"body2",fontWeight:"bold",children:H(I.lak,"LAK")})]}),e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{variant:"body2",children:"USD:"}),e.jsx(c,{variant:"body2",fontWeight:"bold",children:H(I.usd,"USD")})]}),e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(c,{variant:"body2",children:"THB:"}),e.jsx(c,{variant:"body2",fontWeight:"bold",children:H(I.thb,"THB")})]}),e.jsx(He,{sx:{my:1}}),e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(c,{variant:"body1",fontWeight:"bold",children:["Current (",_,"):"]}),e.jsx(c,{variant:"body1",fontWeight:"bold",color:"primary",children:We()})]})]})]})})})]})]})})})})]})},"OrderDetail"),ji=p.memo(({status:t})=>{const[s,r]=p.useState([]),[n,i]=p.useState(!0),[a,l]=p.useState(null);return p.useEffect(()=>{o(async()=>{i(!0),l(null);try{const x=await f.collection("orders").getList(1,50,{filter:`status = "${t}"`,sort:"-created"});r(x.items)}catch(x){console.error("Error fetching orders:",x),l("Failed to load orders")}finally{i(!1)}},"fetchOrders")()},[t]),n?e.jsx(hs,{}):a?e.jsx(Dt,{severity:"error",children:a}):e.jsx(Tt,{component:_t,children:e.jsxs(_e,{children:[e.jsx(Me,{children:e.jsxs(M,{children:[e.jsx(b,{children:"Date"}),e.jsx(b,{children:"Reference"}),e.jsx(b,{children:"Customer"}),e.jsx(b,{children:"Phone"}),e.jsx(b,{children:"Address"}),e.jsx(b,{children:"Status"}),e.jsx(b,{children:"Total"})]})}),e.jsx(ke,{children:s.map(u=>e.jsx(pi,{order:u},u.id))})]})})}),gi=o(()=>{const t=P(),s=U();return e.jsx(_e,{sx:{minWidth:"35em"},children:e.jsxs(ke,{children:[e.jsxs(M,{children:[e.jsx(b,{children:s("resources.orders.fields.basket.sum")}),e.jsx(J,{children:t==null?void 0:t.total_ex_taxes.toLocaleString(void 0,{style:"currency",currency:"USD"})})]}),e.jsxs(M,{children:[e.jsx(b,{children:s("resources.orders.fields.basket.delivery")}),e.jsx(J,{children:t==null?void 0:t.delivery_fees.toLocaleString(void 0,{style:"currency",currency:"USD"})})]}),e.jsxs(M,{children:[e.jsxs(b,{children:[s("resources.orders.fields.basket.taxes")," (",t==null?void 0:t.tax_rate.toLocaleString(void 0,{style:"percent"}),")"]}),e.jsx(J,{children:t==null?void 0:t.taxes.toLocaleString(void 0,{style:"currency",currency:"USD"})})]}),e.jsxs(M,{children:[e.jsx(b,{sx:{fontWeight:"bold"},children:s("resources.orders.fields.basket.total")}),e.jsx(J,{sx:{fontWeight:"bold"},children:t==null?void 0:t.total.toLocaleString(void 0,{style:"currency",currency:"USD"})})]})]})})},"Totals"),fi=o(()=>e.jsx(me,{title:e.jsx(yi,{}),component:"div",children:e.jsx(wi,{})}),"OrderEdit"),yi=o(()=>{const t=$(),{defaultTitle:s}=ve();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"OrderTitle"),bi=o(()=>{const t=P();return e.jsxs(c,{children:[e.jsxs(Je,{to:`/customers/${t==null?void 0:t.id}`,children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),e.jsx("br",{}),e.jsx(Fo,{href:`mailto:${t==null?void 0:t.email}`,children:t==null?void 0:t.email})]})},"CustomerDetails"),Ai=o(()=>{const t=P();return e.jsxs("div",{children:[e.jsxs(c,{children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),e.jsx(c,{children:t==null?void 0:t.address}),e.jsxs(c,{children:[t==null?void 0:t.city,", ",t==null?void 0:t.stateAbbr," ",t==null?void 0:t.zipcode]})]})},"CustomerAddress"),xt=o(()=>e.jsx(d,{sx:{mb:1},children:" "}),"Spacer"),wi=o(()=>{const t=U();return e.jsx(Tr,{children:e.jsxs(d,{sx:{maxWidth:"50em"},children:[e.jsx(Dr,{filterDefaultValues:{status:"ordered"},sort:{field:"date",order:"DESC"}}),e.jsxs(k,{children:[e.jsxs(D,{children:[e.jsxs(y,{container:!0,spacing:1,children:[e.jsxs(y,{size:{xs:12,sm:12,md:8},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.order")}),e.jsxs(y,{container:!0,children:[e.jsx(y,{size:{xs:12,sm:12,md:6},children:e.jsx(he,{source:"date",children:e.jsx(T,{source:"date"})})}),e.jsx(y,{size:{xs:12,sm:12,md:6},children:e.jsx(he,{source:"reference",children:e.jsx(w,{source:"reference"})})})]}),e.jsxs(y,{container:!0,children:[e.jsx(y,{size:{xs:12,sm:12,md:6},children:e.jsx(se,{source:"status",choices:[{id:"delivered",name:"delivered"},{id:"ordered",name:"ordered"},{id:"cancelled",name:"cancelled"},{id:"unknown",name:"unknown",disabled:!0}],sx:{width:"80%"}})}),e.jsx(y,{size:{xs:12,sm:12,md:6},children:e.jsx(d,{sx:{mt:2},children:e.jsx(re,{row:!0,source:"returned"})})})]})]}),e.jsxs(y,{size:{xs:12,sm:12,md:4},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.customer")}),e.jsx(z,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(bi,{})}),e.jsx(xt,{}),e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.shipping_address")}),e.jsx(z,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(Ai,{})})]})]}),e.jsx(xt,{}),e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.items")}),e.jsx("div",{children:e.jsx(Os,{})}),e.jsx(xt,{}),e.jsx(c,{variant:"h6",gutterBottom:!0,children:t("resources.orders.section.total")}),e.jsx("div",{children:e.jsx(gi,{})})]}),e.jsx(Er,{})]})]})})},"OrderForm"),Hs={list:hi,edit:fi,icon:Ct,recordRepresentation:"reference"},vi=[e.jsx(ae,{source:"q",alwaysOn:!0},"q"),e.jsx(se,{source:"verified",choices:[{id:"",name:"All Status"},{id:!0,name:"Verified"},{id:!1,name:"Unverified"}],label:"Status",emptyText:"All Status"},"verified"),e.jsx(se,{source:"emailVisibility",choices:[{id:"",name:"All Email Visibility"},{id:!0,name:"Email Visible"},{id:!1,name:"Email Hidden"}],label:"Email Visibility",emptyText:"All Email Visibility"},"emailVisibility"),e.jsx(ae,{source:"email",label:"Search by Email",placeholder:"Enter email address"},"email"),e.jsx(ae,{source:"username",label:"Search by Username",placeholder:"Enter username"},"username")],Ci=o(()=>{const t=gt(),s=W(),r=o(async()=>{try{const{data:n}=await t.getList("users",{pagination:{page:1,perPage:1e3},sort:{field:"created",order:"DESC"},filter:{}}),i=n.map(u=>({"Full Name":u.full_name,Username:u.username,Email:u.email,Phone:u.phone_number,Verified:u.verified?"Yes":"No",Created:new Date(u.created).toLocaleDateString(),Updated:new Date(u.updated).toLocaleDateString()})),a=be.json_to_sheet(i),l=be.book_new();be.book_append_sheet(l,a,"Users"),us(l,`users_export_${new Date().toISOString().split("T")[0]}.xlsx`),s("Excel file exported successfully",{type:"success"})}catch{s("Failed to export Excel file",{type:"error"})}},"handleExportExcel");return e.jsxs(Y,{children:[e.jsx(pe,{onClick:r,startIcon:e.jsx(ks,{}),variant:"outlined",size:"small",children:"Export Excel"}),e.jsx(we,{}),e.jsx(Ze,{})]})},"UserListActions"),Si=o(()=>{const t=$(),{defaultTitle:s}=V();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"UserTitle"),ne=B.Col,_i=o(({record:t})=>{const[s]=Re(),r=W(),n=wt(),i=o(async a=>{if(a.stopPropagation(),!t)return;const l=a.target.checked;try{await s("users",{id:t.id,data:{...t,verified:l},previousData:t}),r(`User ${l?"verified":"unverified"} successfully`,{type:"success"}),n()}catch{r("Error updating verification status",{type:"error"})}},"handleVerifiedChange");return e.jsx(It,{checked:(t==null?void 0:t.verified)||!1,onChange:i,size:"small",color:"success"})},"VerifiedField"),ki=o(({record:t})=>{const[s]=Re(),r=W(),n=wt(),i=o(async a=>{if(a.stopPropagation(),!t)return;const l=a.target.checked;try{await s("users",{id:t.id,data:{...t,emailVisibility:l},previousData:t}),r(`Email visibility ${l?"enabled":"disabled"} successfully`,{type:"success"}),n()}catch{r("Error updating email visibility",{type:"error"})}},"handleEmailVisibilityChange");return e.jsx(It,{checked:(t==null?void 0:t.emailVisibility)||!1,onChange:i,size:"small",color:"primary"})},"EmailVisibilityField"),Ti=o(()=>(R(t=>t.breakpoints.down("sm")),R(t=>t.breakpoints.down("md")),e.jsx(de,{filters:vi,sort:{field:"created",order:"DESC"},perPage:25,actions:e.jsx(Ci,{}),title:e.jsx(Si,{}),children:e.jsxs(B,{rowClick:"edit",sx:{"& .column-phone_number":{md:{display:"none"},lg:{display:"table-cell"}}},children:[e.jsx(ne,{source:"full_name",label:"Full Name"}),e.jsx(ne,{source:"username",label:"Username"}),e.jsx(ne,{source:"email",field:At}),e.jsx(ne,{source:"phone_number",label:"Phone"}),e.jsx(ne,{source:"verified",field:_i,label:"Verified"}),e.jsx(ne,{source:"emailVisibility",field:ki,label:"Email Visibility"}),e.jsx(ne,{source:"created",field:T,label:"Created"}),e.jsx(ne,{source:"updated",field:T,label:"Updated"})]})})),"UserList"),Di=o(()=>{const t=W(),s=Se(),r=o(n=>{const i={};return n.username||(i.username="Username is required"),n.email||(i.email="Email is required"),n.full_name||(i.full_name="Full name is required"),n.password?n.password.length<6&&(i.password="Password must be at least 6 characters long"):i.password="Password is required",n.passwordConfirm?n.password!==n.passwordConfirm&&(i.passwordConfirm="Passwords do not match"):i.passwordConfirm="Password confirmation is required",i},"validateForm");return e.jsx(Ce,{title:"Create User",mutationOptions:{onSuccess:o(()=>{t("User created successfully",{type:"success"}),s("list","users")},"onSuccess"),onError:o(n=>{t(`Error creating user: ${n.message}`,{type:"error"})},"onError")},children:e.jsx(N,{validate:r,children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2,maxWidth:600},children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Basic Information"}),e.jsx(v,{source:"username",validate:[S()],fullWidth:!0,helperText:"Username must be unique"}),e.jsx(v,{source:"full_name",validate:[S()],fullWidth:!0,label:"Full Name"}),e.jsx(v,{source:"email",validate:[S(),vt()],fullWidth:!0,helperText:"Email must be unique"}),e.jsx(v,{source:"phone_number",fullWidth:!0,label:"Phone Number"}),e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Account Settings"}),e.jsx(Ne,{source:"password",validate:[S()],fullWidth:!0,helperText:"Password must be at least 6 characters long"}),e.jsx(Ne,{source:"passwordConfirm",validate:[S()],fullWidth:!0,label:"Confirm Password",helperText:"Must match the password above"}),e.jsx(re,{source:"verified",label:"Mark as verified",defaultValue:!1}),e.jsx(re,{source:"emailVisibility",label:"Email visibility",defaultValue:!0,helperText:"Allow email to be visible to other users"})]})})})},"UserCreate"),Ei=o(()=>{const t=W();Se();const s=o(r=>{const n={};return r.username||(n.username="Username is required"),r.email||(n.email="Email is required"),r.full_name||(n.full_name="Full name is required"),r.password&&r.password.length<6&&(n.password="Password must be at least 6 characters long"),r.passwordConfirm&&r.password!==r.passwordConfirm&&(n.passwordConfirm="Passwords do not match"),n},"validateForm");return e.jsx(me,{title:"Edit User",mutationOptions:{onSuccess:o(()=>{t("User updated successfully",{type:"success"})},"onSuccess"),onError:o(r=>{t(`Error updating user: ${r.message}`,{type:"error"})},"onError")},children:e.jsx(N,{validate:s,children:e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{size:{xs:12,md:8},children:e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Basic Information"}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(v,{source:"username",validate:[S()],fullWidth:!0,helperText:"Username must be unique"}),e.jsx(v,{source:"full_name",validate:[S()],fullWidth:!0,label:"Full Name"}),e.jsx(v,{source:"email",validate:[S(),vt()],fullWidth:!0,helperText:"Email must be unique"}),e.jsx(v,{source:"phone_number",fullWidth:!0,label:"Phone Number"})]}),e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Change Password"}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(Ne,{source:"password",fullWidth:!0,helperText:"Leave empty to keep current password. Must be at least 6 characters long."}),e.jsx(Ne,{source:"passwordConfirm",fullWidth:!0,label:"Confirm Password",helperText:"Must match the password above"})]}),e.jsx(c,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"Account Settings"}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(re,{source:"verified",label:"Verified"}),e.jsx(re,{source:"emailVisibility",label:"Email visibility",helperText:"Allow email to be visible to other users"})]})]})})}),e.jsx(y,{size:{xs:12,md:4},children:e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"User Information"}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:"User ID"}),e.jsx(w,{source:"id"})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:"Collection"}),e.jsx(w,{source:"collectionName"})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:"Created"}),e.jsx(T,{source:"created",showTime:!0})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",children:"Updated"}),e.jsx(T,{source:"updated",showTime:!0})]})]})]})})})]})})})},"UserEdit"),Ii=o(()=>e.jsxs(Y,{children:[e.jsx(ue,{}),e.jsx(ce,{})]}),"UserShowActions"),Pi=o(()=>e.jsx(Qe,{actions:e.jsx(Ii,{}),title:"User Details",children:e.jsx(bt,{children:e.jsxs(y,{container:!0,spacing:3,children:[e.jsxs(y,{size:{xs:12,md:8},children:[e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"User Information"}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Full Name"}),e.jsx(w,{source:"full_name",variant:"h6"})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Username"}),e.jsx(w,{source:"username"})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Email"}),e.jsx(At,{source:"email"})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Phone Number"}),e.jsx(w,{source:"phone_number"})]})]})]})}),e.jsx(k,{sx:{mt:2},children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Account Status"}),e.jsxs(d,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(mt,{source:"verified",label:"Verified"}),e.jsx(mt,{source:"emailVisibility",label:"Email Visibility"})]})]})})]}),e.jsx(y,{size:{xs:12,md:4},children:e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"System Information"}),e.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"User ID"}),e.jsx(w,{source:"id"})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Collection ID"}),e.jsx(w,{source:"collectionId"})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Collection Name"}),e.jsx(w,{source:"collectionName"})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Created"}),e.jsx(T,{source:"created",showTime:!0})]}),e.jsxs(d,{children:[e.jsx(c,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Last Updated"}),e.jsx(T,{source:"updated",showTime:!0})]})]})]})})})]})})}),"UserShow"),qs={list:Ti,create:Di,edit:Ei,show:Pi,icon:Pt},Li=o(({dense:t=!1})=>{const[s,r]=p.useState({menuCatalog:!0,menuSales:!0,menuCustomers:!0}),n=U(),[i]=Ir();return e.jsxs(d,{sx:{width:i?200:50,marginTop:1,marginBottom:1,transition:o(a=>a.transitions.create("width",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.leavingScreen}),"transition")},className:Pr({"RaMenu-open":i,"RaMenu-closed":!i}),children:[e.jsx(Lr,{}),e.jsx(ge,{to:"/orders",state:{_scrollToTop:!0},primaryText:n("resources.orders.name",{smart_count:2}),leftIcon:e.jsx(Hs.icon,{}),dense:t}),e.jsx(ge,{to:"/blogs",state:{_scrollToTop:!0},primaryText:n("resources.blogs.name",{smart_count:2}),leftIcon:e.jsx(zs.icon,{}),dense:t}),e.jsx(ge,{to:"/customers",state:{_scrollToTop:!0},primaryText:n("resources.customers.name",{smart_count:2}),leftIcon:e.jsx(Ns.icon,{}),dense:t}),e.jsx(ge,{to:"/users",state:{_scrollToTop:!0},primaryText:n("resources.users.name",{smart_count:2}),leftIcon:e.jsx(qs.icon,{}),dense:t}),e.jsx(ge,{to:"/products",state:{_scrollToTop:!0},primaryText:n("resources.products.name",{smart_count:2}),leftIcon:e.jsx(Bt.icon,{}),dense:t}),e.jsx(ge,{to:"/categories",state:{_scrollToTop:!0},primaryText:n("resources.categories.name",{smart_count:2}),leftIcon:e.jsx(Fs.icon,{}),dense:t})]})},"Menu"),Bi=o(({children:t})=>e.jsx(Br,{appBar:zn,menu:Li,sx:{backgroundColor:o(s=>(s.vars||s).palette.background.default,"backgroundColor")},children:t}),"Layout"),Fi=o(()=>{const t=P(),s=ms();return t?e.jsx(G,{disablePadding:!0,children:e.jsxs(K,{component:Je,to:s({resource:"reviews",type:"edit",id:t.id}),children:[e.jsx(Ro,{children:e.jsx(z,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(Ws,{size:"40"})})}),e.jsx(Q,{primary:e.jsxs(p.Fragment,{children:[e.jsx(z,{source:"customer_id",reference:"customers",link:!1,children:e.jsx(Fr,{render:o(r=>`${r.first_name} ${r.last_name}`,"render"),variant:"subtitle1"})})," ","on"," ",e.jsx(z,{source:"product_id",reference:"products",link:!1,children:e.jsx(w,{source:"reference",variant:"subtitle1"})})]}),secondary:t.comment,secondaryTypographyProps:{noWrap:!0}})]})}):null},"ReviewItem"),Ri=o(()=>{const{data:t,error:s,isPending:r,total:n}=V();return r||s||Number(n)===0?null:e.jsx(Ue,{sx:{width:"calc(100vw - 33px)"},children:t.map(i=>e.jsx(Ge,{value:i,children:e.jsx(Fi,{})},i.id))})},"ReviewListMobile"),Ys=o(t=>e.jsx(z,{label:"Product",source:"product_id",reference:"products",...t,children:e.jsx(w,{source:"reference"})}),"ProductReferenceField"),Gs=o(t=>{const{size:s="large"}=t,r=P(t);return r?e.jsx(d,{component:"span",sx:{display:"flex",opacity:.87,whiteSpace:"nowrap"},children:Array(r.rating).fill(!0).map((n,i)=>e.jsx(Ts,{sx:{width:s==="large"?20:15,height:s==="large"?20:15}},i))}):null},"StarRatingField"),Mi=o(t=>s=>{let r={};return s?(t&&t===s.id&&(r={...r,backgroundColor:"action.selected"}),s.status==="accepted"?{...r,borderLeftColor:Ds[500],borderLeftWidth:5,borderLeftStyle:"solid"}:s.status==="pending"?{...r,borderLeftColor:Es[500],borderLeftWidth:5,borderLeftStyle:"solid"}:s.status==="rejected"?{...r,borderLeftColor:Is[500],borderLeftWidth:5,borderLeftStyle:"solid"}:r):r},"rowSx"),Wi=[],$i=o(()=>{const{selectedIds:t=Wi}=V(),s=W(),r=ps("reviews"),[n,{isPending:i}]=js("reviews",{ids:t,data:{status:"accepted"}},{mutationMode:"undoable",onSuccess:o(()=>{s("resources.reviews.notifications.approved_success",{type:"info",undoable:!0}),r()},"onSuccess"),onError:o(()=>{s("resources.reviews.notifications.approved_error",{type:"error"})},"onError")});return e.jsx(gs,{label:"resources.reviews.action.accept",onClick:o(()=>n(),"onClick"),disabled:i,children:e.jsx(Ps,{})})},"BulkAcceptButton"),Oi=[],zi=o(()=>{const{selectedIds:t=Oi}=V(),s=W(),r=ps("reviews"),[n,{isPending:i}]=js("reviews",{ids:t,data:{status:"rejected"}},{mutationMode:"undoable",onSuccess:o(()=>{s("resources.reviews.notifications.approved_success",{type:"info",undoable:!0}),r()},"onSuccess"),onError:o(()=>{s("resources.reviews.notifications.approved_error",{type:"error"})},"onError")});return e.jsx(gs,{label:"resources.reviews.action.reject",onClick:o(()=>n(),"onClick"),disabled:i,children:e.jsx(Ls,{})})},"BulkRejectButton"),Ui=o(()=>e.jsxs(e.Fragment,{children:[e.jsx($i,{}),e.jsx(zi,{}),e.jsx(ds,{})]}),"ReviewsBulkActionButtons"),Ni=B,ye=B.Col,Vi=o(({selectedRow:t})=>{const s=ss(),r=ms();return e.jsxs(Ni,{rowClick:o((n,i)=>(s(r({resource:i,id:n,type:"edit"})),!1),"rowClick"),rowSx:Mi(t),bulkActionButtons:e.jsx(Ui,{}),sx:{"& .RaDataTable-thead":{borderLeftColor:"transparent",borderLeftWidth:5,borderLeftStyle:"solid"}},children:[e.jsx(ye,{source:"date",field:T}),e.jsx(ye,{source:"customer_id",children:e.jsx(Rt,{source:"customer_id",link:!1})}),e.jsx(ye,{source:"product_id",children:e.jsx(Ys,{source:"product_id",link:!1})}),e.jsx(ye,{source:"rating",label:"resources.reviews.fields.rating",field:Gs}),e.jsx(ye,{source:"comment",sx:{maxWidth:"18em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e.jsx(ye,{source:"status"})]})},"ReviewListDesktop"),Hi={accepted:Ds[500],pending:Es[500],rejected:Is[500]},qi=[e.jsx(ae,{source:"q",alwaysOn:!0}),e.jsx(se,{source:"status",choices:[{id:"accepted",name:"Accepted"},{id:"pending",name:"Pending"},{id:"rejected",name:"Rejected"}],optionText:o(t=>e.jsxs(e.Fragment,{children:[e.jsx(d,{component:"span",sx:{bgcolor:Hi[t.id],width:8,height:8,borderRadius:4,mr:1,display:"inline-block"}}),t.name]}),"optionText")}),e.jsx(le,{source:"customer_id",reference:"customers",children:e.jsx(Ve,{optionText:o(t=>t!=null&&t.id?`${t.first_name} ${t.last_name}`:"","optionText"),sx:{minWidth:200}})}),e.jsx(le,{source:"product_id",reference:"products",children:e.jsx(Ve,{optionText:"reference"})}),e.jsx(Pe,{source:"date_gte"}),e.jsx(Pe,{source:"date_lte"})],Yi=o(()=>{const t=U(),s=W(),r=Se(),n=P(),[i,{isPending:a}]=Re("reviews",{id:n==null?void 0:n.id,data:{status:"accepted"},previousData:n},{mutationMode:"undoable",onSuccess:o(()=>{s("resources.reviews.notifications.approved_success",{type:"info",undoable:!0}),r("/reviews")},"onSuccess"),onError:o(()=>{s("resources.reviews.notifications.approved_error",{type:"error"})},"onError")});return n&&n.status==="pending"?e.jsx(pe,{variant:"outlined",color:"primary",size:"small",onClick:o(()=>i(),"onClick"),sx:{borderColor:o(l=>l.palette.success.main,"borderColor")},startIcon:e.jsx(Ps,{sx:{color:o(l=>l.palette.success.main,"color")}}),disabled:a,children:t("resources.reviews.action.accept")}):e.jsx("span",{})},"AcceptButton"),Gi=o(()=>{const t=U(),s=W(),r=Se(),n=P(),[i,{isPending:a}]=Re("reviews",{id:n==null?void 0:n.id,data:{status:"rejected"},previousData:n},{mutationMode:"undoable",onSuccess:o(()=>{s("resources.reviews.notifications.rejected_success",{type:"info",undoable:!0}),r("/reviews")},"onSuccess"),onError:o(()=>{s("resources.reviews.notifications.rejected_error",{type:"error"})},"onError")});return n&&n.status==="pending"?e.jsx(pe,{variant:"outlined",color:"primary",size:"small",onClick:o(()=>i(),"onClick"),sx:{borderColor:o(l=>l.palette.error.main,"borderColor")},startIcon:e.jsx(Ls,{sx:{color:o(l=>l.palette.error.main,"color")}}),disabled:a,children:t("resources.reviews.action.reject")}):e.jsx("span",{})},"RejectButton"),Ki=o(t=>{const{resource:s}=t,r=Se(),n=W(),i=P(t);return i?e.jsx(Mo,{sx:{display:"flex",justifyContent:"space-between",minHeight:{sm:0}},children:i.status==="pending"?e.jsxs(p.Fragment,{children:[e.jsx(Yi,{}),e.jsx(Gi,{})]}):e.jsxs(p.Fragment,{children:[e.jsx(Rr,{mutationOptions:{onSuccess:o(()=>{n("ra.notification.updated",{type:"info",messageArgs:{smart_count:1},undoable:!0}),r("list","reviews")},"onSuccess")},type:"button"}),e.jsx(ce,{record:i,resource:s})]})}):null},"ReviewEditToolbar"),Qi=o(()=>{const t=$(),{defaultTitle:s}=ve();return e.jsx("title",{children:`${t} - ${s}`})},"ReviewTitle$1"),Ji=o(({id:t,onCancel:s})=>{const r=U();return e.jsxs(Mr,{id:t,children:[e.jsx(Qi,{}),e.jsxs(d,{sx:{pt:5,width:{xs:"100vW",sm:400},mt:{xs:2,sm:1}},children:[e.jsxs(Wo,{direction:"row",sx:{p:2},children:[e.jsx(c,{variant:"h6",sx:{flex:"1"},children:r("resources.reviews.detail")}),e.jsx(Le,{onClick:s,size:"small",children:e.jsx(Cs,{})})]}),e.jsxs(N,{sx:{pt:0,pb:0},toolbar:e.jsx(Ki,{}),children:[e.jsxs(y,{container:!0,rowSpacing:1,sx:{mb:1},children:[e.jsx(y,{size:{xs:6},children:e.jsx(he,{source:"customer_id",children:e.jsx(Rt,{source:"customer_id"})})}),e.jsx(y,{size:{xs:6},children:e.jsx(he,{label:"resources.reviews.fields.product_id",children:e.jsx(Ys,{})})}),e.jsx(y,{size:{xs:6},children:e.jsx(he,{children:e.jsx(T,{source:"date"})})}),e.jsx(y,{size:{xs:6},children:e.jsx(he,{label:"resources.reviews.fields.rating",children:e.jsx(Gs,{})})})]}),e.jsx(v,{source:"comment",maxRows:15,multiline:!0})]})]})]})},"ReviewEdit"),Zi=o(()=>e.jsxs(Y,{children:[e.jsx(Be,{}),e.jsx(we,{}),e.jsx(Ze,{}),e.jsx(Fe,{})]}),"ReviewListActions"),Xi=o(()=>{const t=$(),{defaultTitle:s}=V();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"ReviewsTitle"),ea=o(()=>{const t=R(a=>a.breakpoints.down("sm")),s=rs(),r=ss(),n=p.useCallback(()=>{r("/reviews")},[r]),i=sr("/reviews/:id",s.pathname);return e.jsxs(d,{sx:{display:"flex"},children:[e.jsx(de,{sx:{flexGrow:1,transition:o(a=>a.transitions.create(["all"],{duration:a.transitions.duration.enteringScreen}),"transition"),marginRight:i?"400px":0},filters:qi,perPage:25,sort:{field:"date",order:"DESC"},actions:e.jsx(Zi,{}),title:e.jsx(Xi,{}),children:t?e.jsx(Ri,{}):e.jsx(Vi,{selectedRow:i?parseInt(i.params.id,10):void 0})}),e.jsx($o,{variant:"persistent",open:!!i,anchor:"right",onClose:n,sx:{zIndex:100},children:!!i&&e.jsx(Ji,{id:i.params.id,onCancel:n})})]})},"ReviewList"),ta=o(t=>{const{name:s="resources.reviews.fields.rating"}=t,{field:r}=Wr(t),n=U();return e.jsxs(d,{sx:{display:"flex",flexDirection:"column",marginBottom:"1rem"},children:[e.jsx(c,{children:n(s)}),e.jsx(sa,{...r,icon:e.jsx(Ts,{}),onChange:o((i,a)=>r.onChange(a),"onChange")})]})},"StarRatingInput"),sa=kt(Oo)({"& .MuiRating-iconFilled":{color:"#000"},"& .MuiRating-iconHover":{color:"#000"}}),ra=o(()=>{const t=$(),{defaultTitle:s}=ft();return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${s}`}),e.jsx("span",{children:s})]})},"ReviewTitle"),oa=o(()=>{const t=W(),s=Se(),r=rs(),n=o(i=>{const a=$r(r);t("resources.reviews.notifications.created"),a&&a.product_id?s(`/products/${a.product_id}/reviews`):s("/reviews")},"onSuccess");return e.jsx(Ce,{mutationOptions:{onSuccess:n},title:e.jsx(ra,{}),children:e.jsxs(N,{defaultValues:{status:"pending"},sx:{maxWidth:"30em"},children:[e.jsx(le,{source:"customer_id",reference:"customers",children:e.jsx(Ve,{validate:S()})}),e.jsx(le,{source:"product_id",reference:"products",children:e.jsx(Ve,{optionText:"reference",validate:S()})}),e.jsx(Pe,{source:"date",defaultValue:new Date,validate:S()}),e.jsx(ta,{source:"rating",defaultValue:2}),e.jsx(v,{source:"comment",multiline:!0,resettable:!0,validate:S()})]})})},"ReviewCreate"),na={icon:zo,list:ea,create:oa},Ks=[{id:"compulsive",name:"resources.segments.data.compulsive"},{id:"collector",name:"resources.segments.data.collector"},{id:"ordered_once",name:"resources.segments.data.ordered_once"},{id:"regular",name:"resources.segments.data.regular"},{id:"returns",name:"resources.segments.data.returns"},{id:"reviewer",name:"resources.segments.data.reviewer"}];Ks.reduce((t,s)=>(t[s.id]=s,t),{});B.Col;B.NumberCol;const ia={icon:Pt},aa=o(({segment:t})=>{const s=U();return e.jsxs(pe,{size:"small",color:"primary",component:ts,to:{pathname:"/customers",search:as.stringify({filter:{groups:t}})},state:{_scrollToTop:!0},sx:{display:"inline-flex",alignItems:"center"},children:[e.jsx(ia.icon,{sx:{paddingRight:"0.5em"}}),s("resources.segments.fields.customers")]})},"LinkToRelatedCustomers"),la=o(()=>{const t=$(),s=U(),r=Or(),n=s("ra.page.list",{name:r("segments",2)});return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:`${t} - ${n}`}),e.jsxs(k,{sx:{mt:2},children:[e.jsx(et,{title:n}),e.jsxs(_e,{size:"small",children:[e.jsx(Me,{children:e.jsxs(M,{children:[e.jsx(b,{children:s("resources.segments.fields.name")}),e.jsx(b,{})]})}),e.jsx(ke,{children:Ks.map(i=>e.jsxs(M,{children:[e.jsx(b,{children:s(i.name)}),e.jsx(b,{children:e.jsx(aa,{segment:i.id})})]},i.id))})]})]})]})},"Segments"),ca={palette:{primary:{main:"#D4AF37"},secondary:{main:"#D4AF37"},mode:"dark"},sidebar:{width:200},components:{...fs.components,RaMenuItemLink:{styleOverrides:{root:{borderLeft:"3px solid #000","&.RaMenuItemLink-active":{borderLeft:"3px solid #90caf9"}}}},MuiFilledInput:{styleOverrides:{}},MuiAppBar:{styleOverrides:{colorSecondary:{color:"#ffffffb3",backgroundColor:"#616161"}},defaultProps:{elevation:1}}}},da={palette:{primary:{main:"#4f3cc9"},secondary:{light:"#5f5fc4",main:"#283593",dark:"#001064",contrastText:"#fff"},background:{default:"#fcfcfe"},mode:"light"},shape:{borderRadius:10},sidebar:{width:200},components:{...fs.components,RaMenuItemLink:{styleOverrides:{root:{borderLeft:"3px solid #fff","&.RaMenuItemLink-active":{borderLeft:"3px solid #4f3cc9"}}}},MuiPaper:{styleOverrides:{elevation1:{boxShadow:"none"},root:{border:"1px solid #e0e0e3",backgroundClip:"padding-box"}}},MuiAppBar:{styleOverrides:{colorSecondary:{color:"#808080",backgroundColor:"#fff"}},defaultProps:{elevation:1}},MuiLinearProgress:{styleOverrides:{colorPrimary:{backgroundColor:"#f5f5f5"},barColorPrimary:{backgroundColor:"#d7d7d7"}}},MuiTableRow:{styleOverrides:{root:{"&:last-child td":{border:0}}}}}},ua={palette:{mode:"dark",primary:{main:"#D4AF37"},background:{default:"#111111",paper:"#212121"},text:{primary:"#D4AF37"}},typography:{fontFamily:"'Pixelify Sans', cursive"},components:{MuiAutocomplete:{defaultProps:{fullWidth:!0}},MuiFormControl:{defaultProps:{fullWidth:!0}},MuiTextField:{defaultProps:{fullWidth:!0}},RaSimpleFormIterator:{defaultProps:{fullWidth:!0}}}},Qs=Lt(),xa={palette:{mode:"light",bulkActionsToolbarBackgroundColor:Uo(Qs.palette.primary.light,.8)}},ha={palette:{mode:"dark",bulkActionsToolbarBackgroundColor:Qs.palette.primary.dark}},ma=Lt({cssVariables:!0,defaultColorScheme:"light",colorSchemes:{light:xa,dark:ha}}),es={styleOverrides:{root:{"& .SubMenu .MuiMenuItem-root":{paddingLeft:24},"& .RaMenu-closed .SubMenu .MuiMenuItem-root":{paddingLeft:8}}}},ht=[{name:"soft",light:da,dark:ca},{name:"cssVariables",single:ma},{name:"default",light:Ur,dark:zr},{name:"B&W",light:{...Ot,components:{...Ot.components,RaSidebar:es}},dark:{...$t,components:{...$t.components,RaSidebar:es}}},{name:"nano",light:Vr,dark:Nr},{name:"radiant",light:qr,dark:Hr},{name:"house",light:Gr,dark:Yr},{name:"chiptune",light:ua}],pa=o(()=>{const[t,s]=p.useState(""),[r,n]=p.useState(""),i=Kr(),a=W(),l=o(async u=>{u.preventDefault();try{await i({email:t,password:r})}catch{a("Invalid email or password",{type:"error"})}},"handleSubmit");return e.jsx(Qr,{children:e.jsx(No,{maxWidth:"sm",children:e.jsxs(_t,{elevation:3,sx:{padding:4,marginTop:8},children:[e.jsx(c,{variant:"h5",align:"center",gutterBottom:!0,children:"Admin Login"}),e.jsxs(d,{component:"form",onSubmit:l,children:[e.jsx(pt,{fullWidth:!0,label:"Email",name:"email",variant:"outlined",margin:"normal",type:"email",value:t,onChange:o(u=>s(u.target.value),"onChange")}),e.jsx(pt,{fullWidth:!0,label:"Password",name:"password",variant:"outlined",margin:"normal",type:"password",value:r,onChange:o(u=>n(u.target.value),"onChange")}),e.jsx(pe,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{marginTop:2},children:"Login"})]})]})})})},"LoginPage"),ja=Lt({palette:{primary:{main:"#C98B6B"},secondary:{main:"#C98B6B"},error:{main:"#B71C1C"},warning:{main:"#FF5722"},success:{main:"#8BC34A"},background:{default:"linear-gradient(to bottom right, #F5F5F5, #FBF8F4)",paper:"#FBF8F4"},text:{primary:"#000",secondary:"#000"}},typography:{fontFamily:"Canela Trial",button:{textTransform:"none"}},components:{MuiCssBaseline:{styleOverrides:{"@global":{"@font-face":[{fontFamily:"Canela Trial",fontStyle:"normal",fontWeight:400,fontDisplay:"swap",src:"url('https://fonts.googleapis.com/css2?family=Canela+Trial&display=swap') format('woff2')"},{fontFamily:"Noto Sans Lao",fontStyle:"normal",fontWeight:400,fontDisplay:"swap",src:"url('https://fonts.googleapis.com/css2?family=Noto+Sans+Lao&display=swap') format('woff2')"}],body:{background:"linear-gradient(to bottom right, #F5F5F5, #FBF8F4)",fontFamily:"'Canela Trial', 'Noto Sans Lao', sans-serif"},":lang(lo)":{fontFamily:"'Noto Sans Lao', sans-serif"},":lang(en)":{fontFamily:"'Canela Trial', serif"}}}},MuiButton:{styleOverrides:{root:{borderRadius:"10px",color:"#F5F5F5",fontWeight:"bold",padding:"8px 14px","&:hover":{background:"linear-gradient(45deg, #ab6936 30%, #C98B6B 90%)"}}}}}}),ga=o(({children:t})=>{const s=Jr({key:"css"});return e.jsx(rr,{value:s,children:e.jsx(Vo,{theme:ja,children:e.jsxs(ws,{dateAdapter:vs,children:[e.jsx(Ho,{}),t]})})})},"MuiProvider"),fa=[e.jsx(ae,{source:"name",placeholder:"Search by name",alwaysOn:!0}),e.jsx(v,{source:"name_la",label:"Lao Name"})],ya=o(()=>e.jsxs(Y,{children:[e.jsx(Be,{}),e.jsx(we,{}),e.jsx(Fe,{})]}),"ProductCategoryListActions"),ba=o(()=>e.jsx(de,{filters:fa,actions:e.jsx(ya,{}),sort:{field:"created",order:"DESC"},perPage:25,children:e.jsxs(ls,{rowClick:"edit",bulkActionButtons:e.jsx(ce,{}),children:[e.jsx(Xe,{source:"image_url",label:"Image",sx:{width:60,height:60,objectFit:"cover"}}),e.jsx(w,{source:"name",label:"Name"}),e.jsx(w,{source:"name_la",label:"Lao Name"}),e.jsx(T,{source:"created",label:"Created",showTime:!0}),e.jsx(T,{source:"updated",label:"Updated",showTime:!0}),e.jsx(ue,{}),e.jsx(ce,{})]})}),"ProductCategoryList"),Aa=o(()=>{const{record:t}=ve();return e.jsx(et,{title:t?`Edit Category "${t.name}"`:"Edit Category"})},"ProductCategoryTitle$1"),wa=o(()=>e.jsx(me,{title:e.jsx(Aa,{}),children:e.jsx(N,{children:e.jsxs(d,{display:"flex",flexDirection:"column",gap:2,width:"100%",maxWidth:600,children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Category Information"}),e.jsx(v,{source:"name",label:"Category Name",validate:[S()],fullWidth:!0}),e.jsx(v,{source:"name_la",label:"Lao Name",validate:[S()],fullWidth:!0}),e.jsx(v,{source:"image_url",label:"Image URL",validate:[S()],fullWidth:!0,multiline:!0,rows:3})]})})}),"ProductCategoryEdit"),va=o(()=>e.jsx(Ce,{title:e.jsx(et,{title:"Create New Product Category"}),children:e.jsx(N,{children:e.jsxs(d,{display:"flex",flexDirection:"column",gap:2,width:"100%",maxWidth:600,children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"New Category Information"}),e.jsx(v,{source:"name",label:"Category Name",validate:[S()],fullWidth:!0}),e.jsx(v,{source:"name_la",label:"Lao Name",validate:[S()],fullWidth:!0}),e.jsx(v,{source:"image_url",label:"Image URL",validate:[S()],fullWidth:!0,multiline:!0,rows:3,helperText:"Enter a valid image URL"})]})})}),"ProductCategoryCreate"),Ca=o(()=>e.jsxs(Y,{children:[e.jsx(ue,{}),e.jsx(ce,{})]}),"ProductCategoryShowActions"),Sa=o(()=>{const{record:t}=is();return e.jsx(et,{title:t?`Category "${t.name}"`:"Category Details"})},"ProductCategoryTitle"),_a=o(()=>e.jsx(Qe,{title:e.jsx(Sa,{}),actions:e.jsx(Ca,{}),children:e.jsx(bt,{children:e.jsxs(d,{display:"flex",flexDirection:"column",gap:3,maxWidth:800,children:[e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Category Details"}),e.jsxs(d,{display:"flex",gap:4,alignItems:"start",children:[e.jsxs(d,{flex:1,children:[e.jsx(w,{source:"name",label:"Category Name"}),e.jsx(w,{source:"name_la",label:"Lao Name"}),e.jsx(w,{source:"image_url",label:"Image URL"})]}),e.jsx(d,{children:e.jsx(Xe,{source:"image_url",label:"Category Image",sx:{maxWidth:200,maxHeight:200,objectFit:"contain"}})})]})]})}),e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(c,{variant:"h6",gutterBottom:!0,children:"Metadata"}),e.jsx(T,{source:"created",label:"Created",showTime:!0}),e.jsx(T,{source:"updated",label:"Last Updated",showTime:!0}),e.jsx(w,{source:"id",label:"ID"}),e.jsx(w,{source:"collectionId",label:"Collection ID"})]})})]})})}),"ProductCategoryShow"),ka={list:ba,edit:wa,create:va,show:_a,icon:As,recordRepresentation:"name"},Ta=Zr(t=>t==="fr"?Te(()=>import("./fr-Bsr58AwD.js"),__vite__mapDeps([5,0,1,2,3]),import.meta.url).then(s=>s.default):kn,"en",[{locale:"en",name:"English"},{locale:"fr",name:"Français"}]),Js=to(void 0,"ECommerce"),Da=o(()=>{var i,a,l;const[t]=so("themeName","soft"),s=(i=ht.find(u=>u.name===t))==null?void 0:i.single,r=(a=ht.find(u=>u.name===t))==null?void 0:a.light,n=(l=ht.find(u=>u.name===t))==null?void 0:l.dark;return e.jsxs(nr,{title:"Posters Galore Admin",dataProvider:Cn(),store:Js,authProvider:Ko,dashboard:vn,loginPage:pa,layout:Bi,i18nProvider:Ta,disableTelemetry:!0,theme:s,lightTheme:r,darkTheme:n,defaultTheme:"light",requireAuth:!0,children:[e.jsx(ro,{children:e.jsx(ir,{path:"/segments",element:e.jsx(la,{})})}),e.jsx(Z,{name:"customers",...Ns}),e.jsx(Z,{name:"orders",...Hs}),e.jsx(Z,{name:"invoices",...Rn}),e.jsx(Z,{name:"products",...Bt}),e.jsx(Z,{name:"categories",...Fs}),e.jsx(Z,{name:"product_categories",...ka}),e.jsx(Z,{name:"reviews",...na}),e.jsx(Z,{name:"blogs",...zs}),e.jsx(Z,{name:"users",...qs})]})},"App"),Ea=new Xr,Ia=o(()=>e.jsx(eo,{value:Js,children:e.jsx(or,{client:Ea,children:e.jsx(ga,{children:e.jsx(fn,{children:e.jsx(Da,{})})})})}),"AppWrapper"),Zs=document.getElementById("root");if(!Zs)throw new Error("No container found");const Pa=ar.createRoot(Zs);Pa.render(e.jsx(Ia,{}));
//# sourceMappingURL=index-CJ02g5A3.js.map
